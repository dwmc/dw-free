<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>1. $LJ:: Variables</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="lj.install.ljconfig.html" title="Chapter 10. Configuring ljconfig.pl">
<link rel="prev" href="lj.install.ljconfig.html" title="Chapter 10. Configuring ljconfig.pl">
<link rel="next" href="lj.install.ljconfig.helpurls.html" title="2. %LJ::HELPURLS">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">1. <code class="literal">$LJ::</code> Variables</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="lj.install.ljconfig.html">Prev</a> </td>
<th width="60%" align="center">Chapter 10. Configuring ljconfig.pl</th>
<td width="20%" align="right"> <a accesskey="n" href="lj.install.ljconfig.helpurls.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lj.install.ljconfig.vars">1. <code class="literal">$LJ::</code> Variables</h2></div></div></div>
<p>
    Each <code class="literal">$LJ::</code> variable is explained below.  There are two types:
    user-configurable ones and those that are automatically set and interesting only
    to people extending the <span class="application">LiveJournal</span> code.
  </p>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="lj.install.ljconfig.vars.auto">1.1. Auto-Configured</h3></div></div></div>
<p>These <code class="varname">$LJ::</code> settings are automatically set in <code class="filename">ljdefaults.pl</code>. You do not need to use all of them. Some are only documented here for people interested in extending <span class="application">LiveJournal</span>, or for other special cases.You can define them in <code class="filename">ljconfig.pl</code> ahead of time so you can use them in definitions of future variables. </p>
<div class="variablelist">
<p class="title"><b>Configuration Directories</b></p>
<dl>
<dt>
<a name="ljconfig.bin"></a><span class="term"><code class="varname">$LJ::BIN</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">bin</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/bin</pre></div>
</dd>
<dt>
<a name="ljconfig.cvsdir"></a><span class="term"><code class="varname">$LJ::CVSDIR</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">cvs</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>. This is used by <code class="filename">multicvs.conf</code>, which specifies how the files from the multiple <abbr class="abbrev">SVN</abbr> repositories map onto the live file space (<a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.livedir"><code class="varname">$LJ::LIVEDIR</code></a> / <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>).</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/cvs</pre></div>
</dd>
<dt>
<a name="ljconfig.home"></a><span class="term"><code class="varname">$LJ::HOME</code></span>
</dt>
<dd>
<p>Set to the same value as <a class="link" href="lj.install.ljhome.html" title="1. $LJHOME Environment Variable"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$ENV{'LJHOME'}</pre></div>
</dd>
<dt>
<a name="ljconfig.htdocs"></a><span class="term"><code class="varname">$LJ::HTDOCS</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">htdocs</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/htdocs</pre></div>
</dd>
<dt>
<a name="ljconfig.livedir"></a><span class="term"><code class="varname">$LJ::LIVEDIR</code></span>
</dt>
<dd>
<p>Points to <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>. This is used by <code class="filename">multicvs.conf</code>, which specifies how the files from the multiple <abbr class="abbrev">SVN</abbr> repositories map onto the live file space from <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.cvsdir"><code class="varname">$LJ::CVSDIR</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$ENV{'LJHOME'}</pre></div>
</dd>
<dt>
<a name="ljconfig.ssldocs"></a><span class="term"><code class="varname">$LJ::SSLDOCS</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">ssldocs</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/ssldocs</pre></div>
</dd>
<dt>
<a name="ljconfig.temp"></a><span class="term"><code class="varname">$LJ::TEMP</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">temp</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/temp</pre></div>
</dd>
<dt>
<a name="ljconfig.var"></a><span class="term"><code class="varname">$LJ::VAR</code></span>
</dt>
<dd>
<p>Points to the <code class="filename">var</code> directory under <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.home"><code class="varname">$LJ::HOME</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$HOME/var</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Database Setup</b></p>
<dl>
<dt>
<a name="ljconfig.db_timeout"></a><span class="term"><code class="varname">$LJ::DB_TIMEOUT</code></span>
</dt>
<dd>
<p>Integer number of seconds to wait for database handles before timing out.  By default, zero, which means no timeout.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">0;</pre></div>
</dd>
<dt>
<a name="ljconfig.max_repl_lag"></a><span class="term"><code class="varname">$LJ::MAX_REPL_LAG</code></span>
</dt>
<dd><p>The max number of bytes that a <span class="application">MySQL</span> database slave can be behind in replication and still be considered usable.  Note that slave databases are never used for any 'important' read operations (and especially never writes, because writes only go to the master), so in general <span class="application">MySQL</span>'s async replication won't bite you.  This mostly controls how fresh of data a visitor would see, not a content owner.  But in reality, the default of 100k is pretty much real-time, so you can safely ignore this setting.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>E-mail Related</b></p>
<dl>
<dt>
<a name="ljconfig.admin_email"></a><span class="term"><code class="varname">$LJ::ADMIN_EMAIL</code></span>
</dt>
<dd>
<p>Given as the administrative address for functions like changing passwords or information.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">webmaster@$DOMAIN</pre></div>
</dd>
<dt>
<a name="ljconfig.bogus_email"></a><span class="term"><code class="varname">$LJ::BOGUS_EMAIL</code></span>
</dt>
<dd>
<p>Used for automated notices like comment replies and general support request messages. It should be encouraged <span class="emphasis"><em>not</em></span> to reply to this address.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">ys_dontreply@$DOMAIN</pre></div>
</dd>
<dt>
<a name="ljconfig.community_email"></a><span class="term"><code class="varname">$LJ::COMMUNITY_EMAIL</code></span>
</dt>
<dd>
<p>Sets the from address for community invitation <span class="application">e-mail</span>s. When this option is not set, it defaults to the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.admin_email"><code class="varname">$LJ::ADMIN_EMAIL</code></a> address. This makes them appear to be official communications from the site because the same address is used for password reminders and validation <span class="application">e-mail</span>s. The invitations are actually communications from individual users through a site feature - they are more comparable to comment <span class="application">e-mail</span>s.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">community_invitation@$DOMAIN</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">webmaster@$DOMAIN</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Internationalization</b></p>
<dl>
<dt>
<a name="ljconfig.default_lang"></a><span class="term"><code class="varname">@LJ::DEFAULT_LANG</code></span>
</dt>
<dd>
<p>Default <acronym class="acronym">ISO</acronym> (639/639_3166) language code to show site in, for users that have not set their language. Defaults to the first item in @LANGS, which is usually "en", for English. Optional.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">en</pre></div>
</dd>
<dt>
<a name="ljconfig.unicode"></a><span class="term"><code class="varname">$LJ::UNICODE</code></span>
</dt>
<dd><p>Boolean setting that allows <acronym class="acronym">UTF</acronym>-8 support (for posts in multiple languages). The default has been 'on' for ages, and turning it off is nowadays not recommended or even known to be working/reliable.  Keep it enabled.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Miscellaneous Auto-Configured</b></p>
<dl>
<dt>
<a name="ljconfig.autosave_draft_interval"></a><span class="term"><code class="varname">$LJ::AUTOSAVE_DRAFT_INTERVAL</code></span>
</dt>
<dd>
<p>Sets how often the editor at <code class="filename">update.bml</code> will automatically save a draft of the entry. The default saves at intervals of three minutes.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">3;</pre></div>
</dd>
<dt>
<a name="ljconfig.default_editor"></a><span class="term"><code class="varname">$LJ::DEFAULT_EDITOR</code></span>
</dt>
<dd>
<p>Editor for new entries if the user hasn't overridden it.  Should be 'rich' or 'plain'.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">rich</pre></div>
</dd>
<dt>
<a name="ljconfig.gzip_okay"></a><span class="term"><code class="varname">%LJ::GZIP_OKAY</code></span>
</dt>
<dd>
<p>If <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.do_gzip"><code class="varname">$LJ::DO_GZIP</code></a> is enabled, the list of content types considered valid for <span class="command"><strong>gzip</strong></span> compression is defined in this hash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">
    'text/html' =&gt; 1,                # regular web pages; XHTML 1.0 'may' be this
    'text/xml' =&gt; 1,                 # regular XML files
    'application/xml' =&gt; 1,          # XHTML 1.1 'may' be this
    'application/xhtml+xml' =&gt; 1,    # XHTML 1.1 'should' be this
    'application/rdf+xml' =&gt; 1,      # FOAF should be this</pre></div>
</dd>
<dt>
<a name="ljconfig.max_atom_upload"></a><span class="term"><code class="varname">$LJ::MAX_ATOM_UPLOAD</code></span>
</dt>
<dd>
<p>Max number of bytes that users are allowed to upload via Atom <acronym class="acronym">API</acronym>.  Note that this upload path is not ideal, so the entire upload must fit in memory.  Default is 25MB until path is optimized. It is set like this because the <code class="systemitem">HTTP</code> content-length header is in bytes (a 25600 value would be 25KB).</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">26214400</pre></div>
</dd>
<dt>
<a name="ljconfig.max_foaf_friends"></a><span class="term"><code class="varname">$LJ::MAX_FOAF_FRIENDS</code></span>
</dt>
<dd>
<p>The maximum number of friends that users' <acronym class="acronym">FOAF</acronym> files will show (so the server does not get overloaded).  If they have more than the configured amount, some friends will be omitted.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">1000</pre></div>
</dd>
<dt>
<a name="ljconfig.max_friendof_load"></a><span class="term"><code class="varname">$LJ::MAX_FRIENDOF_LOAD</code></span>
</dt>
<dd>
<p>The maximum number of friend-ofs ('fans'/'followers') to load for a given user.  Defaults to 5000.  Beyond that, a user is just too popular and saying 5,000 is usually sufficient because people aren't actually reading the list.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">5000</pre></div>
</dd>
<dt>
<a name="ljconfig.max_userpic_keywords"></a><span class="term"><code class="varname">$LJ::MAX_USERPIC_KEYWORDS</code></span>
</dt>
<dd>
<p>Boolean hash to set usercap for the maximum amount of keywords a userpic can have. The keywords themselves have a 40 character limit; userpic comments can be up to 255 bytes or 120 chars.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">10;</pre></div>
</dd>
<dt>
<a name="ljconfig.profile_bml_file"></a><span class="term"><code class="varname">$LJ::PROFILE_BML_FILE</code></span>
</dt>
<dd><p>The file (relative to htdocs) to use for the profile <acronym class="acronym">URL</acronym>.  Defaults to <code class="filename">userinfo.bml</code></p></dd>
<dt>
<a name="ljconfig.stats_block_size"></a><span class="term"><code class="varname">$LJ::STATS_BLOCK_SIZE</code></span>
</dt>
<dd>
<p>Block size used in stats generation code that gets <em class="replaceable"><code>n</code></em> rows from the database at a time.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">10_000;</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Others</b></p>
<dl>
<dt>
<a name="ljconfig.cookie_domain_reset"></a><span class="term"><code class="varname">@LJ::COOKIE_DOMAIN_RESET</code></span>
</dt>
<dd>
<p>Array of cookie domain values to send when deleting cookies from users.  Only useful when changing domains, and even then kind've useless. Notes: ancient hack for one old specific use.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">("", "$DOMAIN", ".$DOMAIN")</pre></div>
</dd>
<dt>
<a name="ljconfig.cookie_path"></a><span class="term"><code class="varname">$LJ::COOKIE_PATH</code></span>
</dt>
<dd>
<p>According to the <acronym class="acronym">RFC</acronym>s concerning cookies, the cookie path must be explicitly set as well. If <span class="application">LiveJournal</span> is installed underneath a directory other than the top-level domain directory, this needs to be set accordingly. Note: Setting or changing this variable has no practical use, since <span class="application">LiveJournal</span> must be rooted at <code class="systemitem">/</code>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">/</pre></div>
</dd>
<dt>
<a name="ljconfig.dys_left_top"></a><span class="term"><code class="varname">$LJ::DYS_LEFT_TOP</code></span>
</dt>
<dd><p><acronym class="acronym">HTML</acronym> to show at the top left corner of the Dystopia skin. This was never actually used. Second, the Dystopia 'skin' (scheme) is <code class="literal">ljcom</code>, not <acronym class="acronym">GPL</acronym>-licensed <code class="literal">livejournal</code> code.</p></dd>
<dt>
<a name="ljconfig.fix_usercounter_enabled"></a><span class="term"><code class="varname">$LJ::FIX_USERCOUNTER_ENABLED</code></span>
</dt>
<dd><p><span class="strong"><strong>Old historic baggage: Do not use.</strong></span> This boolean enables the <code class="filename">fix_usercounter.bml</code> tool at $SITEROOT/admin. The tool reset user counters to resolve &#8220;<span class="quote">duplicate key error</span>&#8221; issues with journals. A better way to address the problem was found, making this tool redundant.</p></dd>
<dt>
<a name="ljconfig.new_entry_cleanup_hack"></a><span class="term"><code class="varname">$LJ::NEW_ENTRY_CLEANUP_HACK</code></span>
</dt>
<dd><p><span class="strong"><strong>Old historic baggage: Do not use.</strong></span>  There used to be a bug where only parts of entries got deleted, then there was another bug with per-user number allocation.  Together, they forced this option to be made for awhile, where new entries (when this is on) would blow away any old data if part of it was still there but wasn't supposed to be.  This includes deleting comments tied to those old entries. Off by default.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Site Maintenance</b></p>
<dl>
<dt>
<a name="ljconfig.msg_no_comment"></a><span class="term"><code class="varname">$LJ::MSG_NO_COMMENT</code></span>
</dt>
<dd>
<p>Message to show users when they're not allowed to comment due to either their 'get_comments' or 'leave_comments' capability being disabled, probably by the admin to lower activity after a hardware rotation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Due to hardware maintenance, you cannot leave comments at this time.  Watch the news page for updates.</pre></div>
</dd>
<dt>
<a name="ljconfig.msg_no_post"></a><span class="term"><code class="varname">$LJ::MSG_NO_POST</code></span>
</dt>
<dd>
<p>Message to show users when they are not allowed to post due to their 'can_post' capability being disabled, probably by the admin to lower activity after a hardware rotation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Due to hardware maintenance, you cannot post at this time.  Watch the news page for updates.</pre></div>
</dd>
<dt>
<a name="ljconfig.msg_readonly_user"></a><span class="term"><code class="varname">$LJ::MSG_READONLY_USER</code></span>
</dt>
<dd>
<p>Message to show users when their journal (or a journal they are visiting) is in read-only mode due to maintenance.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">This journal is in read-only mode right now while database maintenance
is being performed Try again in a few minutes.</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Database temporarily in read-only mode during maintenance.</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>System Related</b></p>
<dl>
<dt>
<a name="ljconfig.mail_transports"></a><span class="term"><code class="varname">@LJ::MAIL_TRANSPORTS</code></span>
</dt>
<dd>
<p>Mail transports setup. Array values are: protocol, mailserver hostname, and preferential weight. <code class="systemitem">qmtp</code> (requires the <span class="package">Net::QMTP</span> perl module to work properly), <code class="systemitem"><acronym class="acronym">SMTP</acronym></code>, <code class="systemitem">dmtp</code>, and <code class="systemitem">sendmail</code> are the currently supported protocols.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">( [ 'sendmail', $SENDMAIL, 1 ] )</pre></div>
</dd>
<dt>
<a name="ljconfig.sendmail"></a><span class="term"><code class="varname">$LJ::SENDMAIL</code></span>
</dt>
<dd>
<p>The system path to the sendmail program, along with any necessary parameters. This option is ignored if you have defined the higher-precedence option: <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.mail_transports"><code class="varname">@LJ::MAIL_TRANSPORTS</code></a>. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.smtp_server"><code class="varname">$LJ::SMTP_SERVER</code></a></p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">"/usr/sbin/sendmail -t -oi"</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Visuals</b></p>
<dl>
<dt>
<a name="ljconfig.cssproxy"></a><span class="term"><code class="varname">$LJ::CSSPROXY</code></span>
</dt>
<dd><p>If set, external <acronym class="acronym">CSS</acronym> should be proxied through this <acronym class="acronym">URL</acronym> (<acronym class="acronym">URL</acronym> is given a ?u= argument with the escaped <acronym class="acronym">URL</acronym> of <acronym class="acronym">CSS</acronym> to clean. If unset, remote <acronym class="acronym">CSS</acronym> is blocked.</p></dd>
<dt>
<a name="ljconfig.s1_shortcomings"></a><span class="term"><code class="varname">$LJ::S1_SHORTCOMINGS</code></span>
</dt>
<dd><p>Use the S2 style named 's1shortcomings' to handle page types that S1 can't handle.  Otherwise, <span class="application"><acronym class="acronym">BML</acronym></span> is used.  This is off by default, but will eventually become on by default, and no longer an option.</p></dd>
<dt>
<a name="ljconfig.s2_compiled_migration_done"></a><span class="term"><code class="varname">$LJ::S2_COMPILED_MIGRATION_DONE</code></span>
</dt>
<dd>
<p>Do not try to load compiled S2 layers from the global cluster. Any new installation can enable this safely as a minor optimization. If you have an existing site, make sure to only turn this flag on if you have actually migrated everything. The option only really makes sense for large, old sites</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">0;</pre></div>
</dd>
<dt>
<a name="ljconfig.schemes"></a><span class="term"><code class="varname">@LJ::SCHEMES</code></span>
</dt>
<dd>
<p>An array of hashes with keys ('scheme') being a <span class="application"><acronym class="acronym">BML</acronym></span> scheme name and the values ('title') being the scheme description. When set, users can change their default site scheme to the scheme of their choice. Schemes will be displayed according to their order in the array, but the first array item is the site default scheme.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        { scheme =&gt; 'bluewhite', title =&gt; 'Blue White' },
        { scheme =&gt; 'lynx', title =&gt; 'Lynx',
        thumb =&gt; [ 'schemethumb/lynx.png', 200, 166 ]  },
        { scheme =&gt; 'opalcat', title =&gt; 'Opalcat' },
        );</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        { scheme =&gt; 'lynx', title =&gt; 'Lynx', },
        { scheme =&gt; 'bluewhite', title =&gt; 'Blue White' },
        );</pre></div>
</dd>
</dl>
</div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title" id="lj.install.ljconfig.vars.user">1.2. User-Configurable</h3></div></div></div>
<p>New installations will probably want to set these variables. Some are automatically set by ljdefaults.pl based on your other settings, but it wouldn't hurt to specify them all explicitly.</p>
<div class="variablelist">
<p class="title"><b>Abuse Prevention</b></p>
<dl>
<dt>
<a name="ljconfig.blocked_bot_info"></a><span class="term"><code class="varname">$LJ::BLOCKED_BOT_INFO</code></span>
</dt>
<dd><p>Include unique cookie information and <acronym class="acronym">IP</acronym> address with the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.blocked_bot_message"><code class="varname">$LJ::BLOCKED_BOT_MESSAGE</code></a> notice.</p></dd>
<dt>
<a name="ljconfig.blocked_bot_message"></a><span class="term"><code class="varname">$LJ::BLOCKED_BOT_MESSAGE</code></span>
</dt>
<dd>
<p>Message (<acronym class="acronym">HTML</acronym>) shown to people suspected to be bots, informing them they've been banned, and where/what the rules are.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">You don't have permission to view this page.</pre></div>
</dd>
<dt>
<a name="ljconfig.blocked_bot_subject"></a><span class="term"><code class="varname">$LJ::BLOCKED_BOT_SUBJECT</code></span>
</dt>
<dd>
<p>Subject/title (text-only) shown to people suspected to be bots.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">403 Denied</pre></div>
</dd>
<dt>
<a name="ljconfig.blocked_bot_uri"></a><span class="term"><code class="varname">$LJ::BLOCKED_BOT_URI</code></span>
</dt>
<dd><p>Path (e.g. /bots) at which an informational page about your acceptable bot policies is documented.  This <acronym class="acronym">URI</acronym> is excluded from anti-bot measures, so make sure it's as permissive as possible to allow humans in who may be lazy in their typing.  For example, leave off the trailing slash (/bots instead of /bots/) if your <acronym class="acronym">URI</acronym> is a directory.</p></dd>
<dt>
<a name="ljconfig.deny_request_from_email"></a><span class="term"><code class="varname">$LJ::DENY_REQUEST_FROM_EMAIL</code></span>
</dt>
<dd>
<p>Setup support <span class="application">e-mail</span> address to not accept new <span class="application">e-mail</span>s.  Basically if an address is specified below, any user who <span class="application">e-mail</span>s it out of the blue will be sent back a copy of the specified file along with their <span class="application">e-mail</span>.  Users will still be allowed to respond to <span class="application">e-mail</span>s from the support system, but they are not able to open a request by <span class="application">e-mail</span>ing the address. The value part of the hash is the name of an include file.  It will be loaded out of <code class="filename"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/htdocs/inc</code>.  See <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.fileedit_via_db"><code class="varname">$LJ::FILEEDIT_VIA_DB</code></a> for how to make it read from <span class="application">memcached</span>/<abbr class="abbrev">DB</abbr>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    'abuse@$DOMAIN' =&gt; 'bounce-abuse',
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.rate_comment_anon"></a><span class="term"><code class="varname">$LJ::RATE_COMMENT_ANON</code></span>
</dt>
<dd>
<p>Arrayref of rate rules to apply incoming comments from anonymous &#8220;<span class="quote">users</span>&#8221;.  It is switched off by default.  Each rate rule is an arrayref of two items:  number of comments, and period of time.  If user tries to make more comments in the specified time period, the comment is denied, at least without a <acronym class="acronym">CAPTCHA</acronym>. In the example, anonymous comments will <span class="emphasis"><em>always</em></span> require a <acronym class="acronym">CAPTCHA</acronym>. For efficient anti-spammer rate-limiting we recommend you also run <span class="application">memcached</span>, and set the appropriate <code class="filename">ljconfig.pl</code> variables (<a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.memcache_compress_threshold"><code class="varname">@LJ::MEMCACHE_COMPRESS_THRESHOLD</code></a> and <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.memcache_servers"><code class="varname">@LJ::MEMCACHE_SERVERS</code></a>).</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">[[0, 65535]];</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">[ [ 300, 3600 ], [ 200, 1800 ], [ 150, 900 ], [ 15, 60 ] ];</pre></div>
</dd>
<dt>
<a name="ljconfig.rate_comment_auth"></a><span class="term"><code class="varname">$LJ::RATE_COMMENT_AUTH</code></span>
</dt>
<dd>
<p>Arrayref of rate rules to apply incoming comments from authenticated users .  It is switched off by default. Each rate rule is an arrayref of two items:  number of comments, and period of time.  If user makes more comments in period of time, comment is denied, at least without a <acronym class="acronym">CAPTCHA</acronym>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">[ [ 200, 3600 ], [ 20, 60 ] ];</pre></div>
</dd>
<dt>
<a name="ljconfig.rbl_list"></a><span class="term"><code class="varname">@LJ::RBL_LIST</code></span>
</dt>
<dd><p>Real-time Block List support for comments. In the array specify providers you wish to use, like <code class="systemitem">spamhaus.org</code>'s <acronym class="acronym">XBL</acronym> list or <code class="systemitem">openproxies.com</code>'s data, to help combat comment spam.</p></dd>
<dt>
<a name="ljconfig.require_talkhash"></a><span class="term"><code class="varname">$LJ::REQUIRE_TALKHASH</code></span>
</dt>
<dd><p>Require submitted comments to include a signed hidden value provided by the server.  Slows down comment-spammers, at least, in that they have to fetch pages first, instead of just blasting away POSTs.  Defaults to off.</p></dd>
<dt>
<a name="ljconfig.require_talkhash_notold"></a><span class="term"><code class="varname">$LJ::REQUIRE_TALKHASH_NOTOLD</code></span>
</dt>
<dd><p>If <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.require_talkhash"><code class="varname">$LJ::REQUIRE_TALKHASH</code></a> is on, also make sure that the talkhash provided was issued in the past two hours.  Defaults to off.</p></dd>
<dt>
<a name="ljconfig.secure_password_reset"></a><span class="term"><code class="varname">$LJ::SECURE_PASSWORD_RESET</code></span>
</dt>
<dd><p>If enabled, do not <span class="application">e-mail</span> passwords in the clear from <code class="filename">lostinfo.bml</code>. Instead, <span class="application">e-mail</span> a link that allows the user to reset their password. The link authorizes the user to use <code class="filename">changepassword.bml</code>, without an old password.</p></dd>
<dt>
<a name="ljconfig.talk_abort_regexp"></a><span class="term"><code class="varname">$LJ::TALK_ABORT_REGEXP</code></span>
</dt>
<dd><p>Regular expression which, when matched on incoming comment bodies, kills the comment.</p></dd>
<dt>
<a name="ljconfig.talk_max_urls"></a><span class="term"><code class="varname">$LJ::TALK_MAX_URLS</code></span>
</dt>
<dd>
<p>If set, up to this many <acronym class="acronym">URL</acronym>s will be extracted from comments and stored (in the <a class="link" href="ljp.dbschema.commenturls.html" title="commenturls">commenturls</a> table) for analysis.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">500;</pre></div>
</dd>
<dt>
<a name="ljconfig.talkspam"></a><span class="term"><code class="varname">@LJ::TALKSPAM</code></span>
</dt>
<dd>
<p>Filter comments for spam using this list of regular expressions.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        'morphese',
        );</pre></div>
</dd>
<dt>
<a name="ljconfig.uniq_cookies"></a><span class="term"><code class="varname">$LJ::UNIQ_COOKIES</code></span>
</dt>
<dd><p>Set this boolean value to true, to give users a unique session cookie, unrelated to their login session cookie, to help fight abuse.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Capabilities/User Options</b></p>
<dl>
<dt>
<a name="ljconfig.allow_pics_over_quota"></a><span class="term"><code class="varname">$LJ::ALLOW_PICS_OVER_QUOTA</code></span>
</dt>
<dd><p>By default, when a user has more userpics than their account type allows, perhaps due to expiration of paid time, their least often used userpics (based on their journal posts) will be marked inactive. This happens whenever their account type is changed or they visit <code class="filename">editpics.bml</code>. They will no longer be available for use, and only the account owner may see them on <code class="filename">editpics.bml</code>. Turning this boolean setting true will circumvent this behavior. In other words, enabling this option lets users just keep whatever userpics they had when their account type changed.</p></dd>
<dt>
<a name="ljconfig.cap"></a><span class="term"><code class="varname">%LJ::CAP</code></span>
</dt>
<dd><p>A hash that defines the capability class limits. The keys are bit numbers, from 0 &#8211; 15, and the values are hashrefs with limit names and values. Consult <a class="xref" href="lj.install.ljconfig.caps.html" title="4. Setting Capabilities">Section 4, &#8220;Setting Capabilities&#8221;</a> for more information.</p></dd>
<dt>
<a name="ljconfig.cap_def"></a><span class="term"><code class="varname">%LJ::CAP_DEF</code></span>
</dt>
<dd><p>The default capability limits, used only when no other class-specific limit below matches.</p></dd>
<dt>
<a name="ljconfig.email_post_domain"></a><span class="term"><code class="varname">$LJ::EMAIL_POST_DOMAIN</code></span>
</dt>
<dd>
<p>If set, and your <acronym class="acronym">MTA</acronym> is configured, users can post to their account via username@$EMAIL_POST_DOMAIN.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">post.$DOMAIN</pre></div>
</dd>
<dt>
<a name="ljconfig.everyone_valid"></a><span class="term"><code class="varname">$LJ::EVERYONE_VALID</code></span>
</dt>
<dd><p>If set to true, users don't need to validate their <span class="application">e-mail</span> addresses.</p></dd>
<dt>
<a name="ljconfig.newuser_caps"></a><span class="term"><code class="varname">$LJ::NEWUSER_CAPS</code></span>
</dt>
<dd><p>The default capability class mask for new users. Bitmask of capability classes that new users begin their accounts with.  By default users are not in any capability classes and get only the default site-wide capabilities.  See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.cap"><code class="varname">%LJ::CAP</code></a>.</p></dd>
<dt>
<a name="ljconfig.schoolsmax"></a><span class="term"><code class="varname">$LJ::SCHOOLSMAX</code></span>
</dt>
<dd>
<p>Hashref of journaltype (P, C, I, &#8230;) to maximum number of allowed attended schools for that journal type.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">{
    'P' =&gt; 25,
    'I' =&gt; 25,
    'S' =&gt; 25,
    'C' =&gt; 50,
    };</pre></div>
</dd>
<dt>
<a name="ljconfig.use_pgp"></a><span class="term"><code class="varname">$LJ::USE_PGP</code></span>
</dt>
<dd><p>Let users set their <acronym class="acronym">PGP</acronym>/<acronym class="acronym">GPG</acronym> public key, and accept <acronym class="acronym">PGP</acronym>/<acronym class="acronym">GPG</acronym>-signed <span class="application">e-mail</span> for <span class="application">e-mail</span> posting. Requires <code class="filename">GnuPG::Interface</code> and <code class="filename">Mail::GnuPG</code> modules to be installed. Note: users need to use <acronym class="acronym">GPG</acronym> version 1.2.4, or higher.</p></dd>
<dt>
<a name="ljconfig.user_email"></a><span class="term"><code class="varname">$LJ::USER_EMAIL</code></span>
</dt>
<dd><p>Do certain users get a forwarding <span class="application">e-mail</span> address, such as user@$DOMAIN?. This requires additional mail system configuration. Users will also need the &#8220;<span class="quote">useremail</span>&#8221; cap.</p></dd>
<dt>
<a name="ljconfig.userprop_def"></a><span class="term"><code class="varname">%LJ::USERPROP_DEF</code></span>
</dt>
<dd>
<p>This option defines the user-properties that users should have by default.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">%USERPROP_DEF = (
    "s1_lastn_style" =&gt; 29,
    "s1_friends_style" =&gt; 20,
    "s1_calendar_style" =&gt; 2,
    "s1_day_style" =&gt; 11,
    );</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Contact <span class="application">e-mail</span> addresses</b></p>
<dl>
<dt>
<a name="ljconfig.alias_to_supportcat"></a><span class="term"><code class="varname">%LJ::ALIAS_TO_SUPPORTCAT</code></span>
</dt>
<dd><p>This provides a way to declare more than one <span class="application">e-mail</span> address which is routed to a support category.  The primary incoming <span class="application">e-mail</span> address for a support category is in the <a class="link" href="ljp.dbschema.supportcat.html" title="supportcat">supportcat</a> table.  If you need more than one, this hash maps from the <span class="application">e-mail</span> address you want to accept mail, to the primary <span class="application">e-mail</span> address of that support category.  For instance:  %ALIAS_TO_SUPPORTCAT = ('dmca@example.com' =&gt; 'webmaster@example.com') would mean that dmca@ would go to the same support category that webmaster@ would otherwise go to.</p></dd>
<dt>
<a name="ljconfig.support_email"></a><span class="term"><code class="varname">$LJ::SUPPORT_EMAIL</code></span>
</dt>
<dd>
<p>Used as a contact method for people to report problems with the <span class="application">LiveJournal</span> installation.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">support@$DOMAIN</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Database Related</b></p>
<dl>
<dt>
<a name="ljconfig.clusters"></a><span class="term"><code class="varname">@LJ::CLUSTERS</code></span>
</dt>
<dd>
<p>This is an array listing the names of the clusters that your configuration uses. Each one needs a 'cluster$i' role in <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.dbinfo"><code class="varname">%LJ::DBINFO</code></a>. Consult <a class="xref" href="lj.install.supplemental_sw.multiple_db.html" title="2. Setting up multiple database servers">Section 2, &#8220;Setting up multiple database servers&#8221;</a> for more details.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">( 1, 2, 3 )</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">( 1 )</pre></div>
</dd>
<dt>
<a name="ljconfig.db_log_host"></a><span class="term"><code class="varname">$LJ::DB_LOG_HOST</code></span>
</dt>
<dd>
<p>An optional host:port to send <acronym class="acronym">UDP</acronym> packets to with blocking reports.  The reports log the total amount of time used in a slow operation to a remote host via <acronym class="acronym">UDP</acronym>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">foo.example.com:8030</pre></div>
</dd>
<dt>
<a name="ljconfig.dbinfo"></a><span class="term"><code class="varname">%LJ::DBINFO</code></span>
</dt>
<dd><p>This is a hash that contains the necessary information to connect to your database, as well as the configuration for multiple database clusters, if your installation supports them. Consult <a class="xref" href="lj.install.ljconfig.dbinfo.html" title="4. Configuring %LJ::DBINFO">Section 4, &#8220;Configuring <code class="literal">%LJ::DBINFO</code>&#8221;</a> for more details.</p></dd>
<dt>
<a name="ljconfig.default_cluster"></a><span class="term"><code class="varname">$LJ::DEFAULT_CLUSTER</code></span>
</dt>
<dd>
<p>The default cluster to choose when creating new accounts. If you have an arrayref of multiple cluster names, for scalability, one of the listed clusters is chosen at random. You can weight new users by repeating cluster numbers, e.g. [ 1, 1, 1, 2 ] puts 75% of people on cluster 1, 25% of people on cluster 2.  Clusters are checked for validity before being used.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">[ 1 ]</pre></div>
</dd>
<dt>
<a name="ljconfig.directory_separate"></a><span class="term"><code class="varname">$LJ::DIRECTORY_SEPARATE</code></span>
</dt>
<dd><p>If true, only use the 'directory' <abbr class="abbrev">DB</abbr> role for the directory, and don't also try the 'slave' and 'master' roles. Consult <a class="xref" href="lj.install.ljconfig.dbinfo.html" title="4. Configuring %LJ::DBINFO">Section 4, &#8220;Configuring <code class="literal">%LJ::DBINFO</code>&#8221;</a> for details on setting roles.</p></dd>
<dt>
<a name="ljconfig.disable_master"></a><span class="term"><code class="varname">$LJ::DISABLE_MASTER</code></span>
</dt>
<dd><p>If set to true, access to the 'master' <abbr class="abbrev">DB</abbr> role is prevented, by breaking the <a class="xref" href="ljp.api.lj.get_dbh.html" title="LJ::get_dbh">LJ::get_dbh</a> function.  Useful during master database migrations.</p></dd>
<dt>
<a name="ljconfig.disconnect_db_log"></a><span class="term"><code class="varname">$LJ::DISCONNECT_DB_LOG</code></span>
</dt>
<dd><p>If set to true, database connections for logging are disconnected at the end of each request.</p></dd>
<dt>
<a name="ljconfig.disconnect_dbs"></a><span class="term"><code class="varname">$LJ::DISCONNECT_DBS</code></span>
</dt>
<dd><p>If set to true, all database connection handles (except those for logging) are disconnected at the end of each request.  Recommended for high-performance sites with lots of database clusters.  See also: <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.disconnect_db_log"><code class="varname">$LJ::DISCONNECT_DB_LOG</code></a></p></dd>
<dt>
<a name="ljconfig.disconnect_memcache"></a><span class="term"><code class="varname">$LJ::DISCONNECT_MEMCACHE</code></span>
</dt>
<dd><p>If set to true, <span class="application">memcached</span> connection handles are disconnected at the end of each request.  Not recommended if your <span class="application">memcached</span> instances are <span class="application">Linux</span> 2.6.</p></dd>
<dt>
<a name="ljconfig.fileedit_via_db"></a><span class="term"><code class="varname">$LJ::FILEEDIT_VIA_DB</code></span>
</dt>
<dd><p>Boolean value that controls /admin/fileedit setup. If you are using and frequently editing the files
                    in <code class="filename">htdocs/inc</code>, you may wish to put all of these files into the database. It uses the <span class="application"><acronym class="acronym">BML</acronym></span> hook
                    called &#8220;<span class="quote">include_getter</span>&#8221;. If it <span class="strong"><strong>is</strong></span> defined, then it is called and checked every
                    time <span class="application"><acronym class="acronym">BML</acronym></span> includes something. It behaves like other <span class="application"><acronym class="acronym">BML</acronym></span> hooks. The hook uses the <code class="literal">LJ::load_include</code> <acronym class="acronym">API</acronym>. Using
                    these <code class="filename">ljconfig.pl</code> options, you can configure it to make none/some/all <code class="literal">include</code> files be loaded
                    from <span class="application">memcached</span> / <abbr class="abbrev">DB</abbr>. You can instruct <span class="application"><acronym class="acronym">BML</acronym></span> to treat <span class="emphasis"><em>all</em></span> &lt;?_include?&gt; statements as being pulled
                    from <span class="application">memcached</span> (failover to the database) by uncommenting this.
                    Alternatively, you can specify that only particular files should be kept in <span class="application">memcached</span> and the database, using a hash: (%LJ::FILEEDIT_VIA_DB).
                    An example value for the hash, is: ( 'support_links' =&gt; 1, );</p></dd>
<dt>
<a name="ljconfig.gearman_servers"></a><span class="term"><code class="varname">@LJ::GEARMAN_SERVERS</code></span>
</dt>
<dd>
<p><span class="application">Gearman</span> information, if you have <code class="systemitem">gearmand</code> servers running, so you can run workers. Uses form: hostname:port.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">('foo.example.com:7003')</pre></div>
</dd>
<dt>
<a name="ljconfig.memcache_compress_threshold"></a><span class="term"><code class="varname">@LJ::MEMCACHE_COMPRESS_THRESHOLD</code></span>
</dt>
<dd>
<p>This is used to set the minimum size of an object before trying to compress it. A value of '0' turns off compress; a value of <em class="replaceable"><code>x</code></em> sets that size as required. You specify the array value in bytes.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">1_000;</pre></div>
</dd>
<dt>
<a name="ljconfig.memcache_pref_ip"></a><span class="term"><code class="varname">%LJ::MEMCACHE_PREF_IP</code></span>
</dt>
<dd>
<p>If you have multiple internal networks and would like the <span class="application">memcached</span> libraries to pick one network over the other, you can set the preferred <acronym class="acronym">IP</acronym> list. In the example below, the variable is set to say &#8220;<span class="quote">if we try to connect to 10.0.0.1, instead try 10.10.0.1 first and then fall back to 10.0.0.1</span>&#8221;.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    10.0.0.1 =&gt; 10.10.0.1,
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.memcache_servers"></a><span class="term"><code class="varname">@LJ::MEMCACHE_SERVERS</code></span>
</dt>
<dd>
<p>Memcache information, if you have <span class="application">memcached</span> servers running. Uses form: hostname:port.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">('foo.example.com:11211')</pre></div>
</dd>
<dt>
<a name="ljconfig.stats_force_slow"></a><span class="term"><code class="varname">$LJ::STATS_FORCE_SLOW</code></span>
</dt>
<dd><p>Make the stats system use the &#8220;<span class="quote">slow</span>&#8221; database role, never using &#8220;<span class="quote">slave</span>&#8221; or &#8220;<span class="quote">master</span>&#8221;, and dying loudly if it is unable to do so.</p></dd>
<dt>
<a name="ljconfig.support_slow_roles"></a><span class="term"><code class="varname">@LJ::SUPPORT_SLOW_ROLES</code></span>
</dt>
<dd>
<p>Array of database roles to be used for slow support queries, in order of precedence.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">('slow')</pre></div>
</dd>
<dt>
<a name="ljconfig.theschwartz_dbs"></a><span class="term"><code class="varname">@LJ::THESCHWARTZ_DBS</code></span>
</dt>
<dd>
<p><abbr class="abbrev">TheSchwartz</abbr> information, so it can connect to your database, if you have <abbr class="abbrev">TheSchwartz</abbr> server and workers running.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">my $mast = $LJ::DBINFO{master};
    my $dbname = $mast-&gt;{dbname} || 'livejournal';
    @LJ::THESCHWARTZ_DBS =({
    dsn  =&gt; 'dbi:mysql:$dbname;host=$mast-&gt;{host}',
    user =&gt; $mast-&gt;{user},
    pass =&gt; $mast-&gt;{pass},
    prefix =&gt; 'sch_',
    });</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Development/Debugging Options</b></p>
<dl>
<dt>
<a name="ljconfig.allow_cluster_select"></a><span class="term"><code class="varname">$LJ::ALLOW_CLUSTER_SELECT</code></span>
</dt>
<dd><p>When set true, the journal creation page will display a drop-down list of clusters (from <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.clusters"><code class="varname">@LJ::CLUSTERS</code></a>) along with the old 'cluster 0' which used the old <abbr class="abbrev">DB</abbr> schema and the user creating an account can choose where they go. In reality, there's no use for this, it is only useful when working on the code. <span class="emphasis"><em>Deprecated</em></span>. Instead, use: $LJ::DEBUG{allow_cluster_select} = 1;.</p></dd>
<dt>
<a name="ljconfig.alt_profile_bml_file"></a><span class="term"><code class="varname">%LJ::ALT_PROFILE_BML_FILE</code></span>
</dt>
<dd><p>Mapping of key (word chars) to file (like <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.profile_bml_file"><code class="varname">$LJ::PROFILE_BML_FILE</code></a>) to use to override the default $LJ::PROFILE_BML_FILE.  Used if the ver=[key] <acronym class="acronym">URL</acronym> parameter is used on a /profile <acronym class="acronym">URL</acronym>.</p></dd>
<dt>
<a name="ljconfig.anti_squatter"></a><span class="term"><code class="varname">$LJ::ANTI_SQUATTER</code></span>
</dt>
<dd><p>Set true if your installation is a publicly available development server and if you would like beta testers to ensure that they understand as such. If left alone your installation might become susceptible to hordes of squatter accounts. <span class="emphasis"><em>Deprecated</em></span>. Instead, use: $LJ::DEBUG{anti_squatter} = 1;</p></dd>
<dt>
<a name="ljconfig.dev_has_real_ssl"></a><span class="term"><code class="varname">$LJ::DEV_HAS_REAL_SSL</code></span>
</dt>
<dd><p>Enable this if you are running a development installation and have set up <acronym class="acronym">SSL</acronym>.</p></dd>
<dt>
<a name="ljconfig.is_dev_server"></a><span class="term"><code class="varname">$LJ::IS_DEV_SERVER</code></span>
</dt>
<dd><p>Enable this option to signify that the server running the <span class="application">LiveJournal</span> software is being used as a development server and not used for production.  A lot of debug info and intentional security holes for convenience are introduced when this is enabled. When enabled, the  tool will check your <code class="filename">ljconfig.pl</code> variables (using the <code class="literal">LJ::ConfCheck::*</code> module). Additionally, changed library files are automatically reloaded without stopping/starting <span class="application">Apache</span>.</p></dd>
<dt>
<a name="ljconfig.langs_in_progress"></a><span class="term"><code class="varname">@LJ::LANGS_IN_PROGRESS</code></span>
</dt>
<dd><p>Array of additional (<acronym class="acronym">ISO</acronym> 639/639_3166) language codes to allow users to select e.g. using an argument on a <acronym class="acronym">URL</acronym>, if they know about them. These ones are actively being translated, but are not yet ready to be publicly available.</p></dd>
<dt>
<a name="ljconfig.post_without_auth"></a><span class="term"><code class="varname">%LJ::POST_WITHOUT_AUTH</code></span>
</dt>
<dd>
<p>Support explicit <acronym class="acronym">IP</acronym> + community + user posting without passwords, for
                    internal purposes. You might want to use this if you want to make commits to your local <abbr class="abbrev">SVN</abbr> repository but without parsing your local <abbr class="abbrev">SVN</abbr> configuration,
                    for example.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    '127.0.0.1' =&gt; {
    'changelog' =&gt; [qw(stan eric wendy kyle etc)],
    'another_community' =&gt; [qw(bob mary jane sue)],
    },
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.testaccts"></a><span class="term"><code class="varname">@LJ::TESTACCTS</code></span>
</dt>
<dd>
<p>A list of usernames used for testing purposes. The password to these accounts cannot be changed through the user interface.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">qw(test test2);</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Domain Related</b></p>
<dl>
<dt>
<a name="ljconfig.adserver"></a><span class="term"><code class="varname">$LJ::ADSERVER</code></span>
</dt>
<dd><p>Subdomain <acronym class="acronym">URL</acronym> to use for ad-serving.</p></dd>
<dt>
<a name="ljconfig.cookie_domain"></a><span class="term"><code class="varname">$LJ::COOKIE_DOMAIN</code></span>
</dt>
<dd>
<p>The &#8220;<span class="quote">domain</span>&#8221; value set on cookies sent to users. Note the leading period, which is a wildcard for everything at or under $DOMAIN.
                    Cookie domains should simply be set to .$domain.tld, based on the Netscape Cookie <abbr class="abbrev">Spec.</abbr>, but some older browsers do not adhere to the specs very well. <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.cookie_domain"><code class="varname">$LJ::COOKIE_DOMAIN</code></a> can be a single string value, or it can be a perl array ref.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">["", ".$DOMAIN"]</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">.$DOMAIN;</pre></div>
</dd>
<dt>
<a name="ljconfig.domain"></a><span class="term"><code class="varname">$LJ::DOMAIN</code></span>
</dt>
<dd>
<p>The minimal domain name of the site, excluding the 'www.' prefix if applicable.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">example.com</pre></div>
</dd>
<dt>
<a name="ljconfig.domain_web"></a><span class="term"><code class="varname">$LJ::DOMAIN_WEB</code></span>
</dt>
<dd>
<p>The preferred domain name for your installation's web root.  For instance, if your $DOMAIN is 'foo.com', your $DOMAIN_WEB might be 'www.foo.com', so any user who goes to foo.com will be redirected to www.foo.com. If defined and different from <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.domain"><code class="varname">$LJ::DOMAIN</code></a>, any GET requests to <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.domain"><code class="varname">$LJ::DOMAIN</code></a> will be redirected to <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.domain_web"><code class="varname">$LJ::DOMAIN_WEB</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">www.$DOMAIN;</pre></div>
</dd>
<dt>
<a name="ljconfig.embed_module_domain"></a><span class="term"><code class="varname">$LJ::EMBED_MODULE_DOMAIN</code></span>
</dt>
<dd>
<p>Prefix for embedded media content. Media is embedded into an entry or comment using an iframe. We recommend using a separate domain, for security.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">embed.$DOMAIN</pre></div>
</dd>
<dt>
<a name="ljconfig.frontpage_journal"></a><span class="term"><code class="varname">$LJ::FRONTPAGE_JOURNAL</code></span>
</dt>
<dd><p>If set, the main page of the site loads the specified journal, not the default index page. Use this if you're running a news site where there's only one journal, or one journal is dominant.</p></dd>
<dt>
<a name="ljconfig.imgprefix"></a><span class="term"><code class="varname">$LJ::IMGPREFIX</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix of the (static) image directory or subdomain. Does not take a trailing slash. By default it is $SITEROOT/img, but your load balancing may dictate another hostname or port for efficiency. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.jsprefix"><code class="varname">$LJ::JSPREFIX</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITEROOT/img</pre></div>
</dd>
<dt>
<a name="ljconfig.jsprefix"></a><span class="term"><code class="varname">$LJ::JSPREFIX</code></span>
</dt>
<dd>
<p>Prefix on (static) <span class="application">JavaScript</span> directory or subdomain, for <acronym class="acronym">URL</acronym>s. Does not take a trailing slash. By default it is $SITEROOT/js, but your load balancing may dictate another hostname or port for efficiency. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.imgprefix"><code class="varname">$LJ::IMGPREFIX</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITEROOT/js</pre></div>
</dd>
<dt>
<a name="ljconfig.only_user_vhosts"></a><span class="term"><code class="varname">$LJ::ONLY_USER_VHOSTS</code></span>
</dt>
<dd><p>If you <span class="strong"><strong>only</strong></span> want <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.user_vhosts"><code class="varname">$LJ::USER_VHOSTS</code></a> to work, and want to disable the typical /users/USERNAME, /~USERNAME, and /community/USERNAME <acronym class="acronym">URL</acronym>s, set this boolean option.</p></dd>
<dt>
<a name="ljconfig.other_vhosts"></a><span class="term"><code class="varname">$LJ::OTHER_VHOSTS</code></span>
</dt>
<dd><p>Let users <code class="systemitem">CNAME</code> their vanity domains to this <span class="application">LiveJournal</span> installation, to transparently load their
                    journal. Users will also need the &#8220;<span class="quote">domainmap</span>&#8221; cap.</p></dd>
<dt>
<a name="ljconfig.palimgroot"></a><span class="term"><code class="varname">$LJ::PALIMGROOT</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix to the palimgs directory or subdomain. Does not take a trailing slash. Prefix on <acronym class="acronym">GIF</acronym>/<acronym class="acronym">PNG</acronym>s with dynamically generated palettes.  By default, it's '$SITEROOT/palimg', and there is little reason to change it. Useful if you want to move images, used for styling, to another host. You can use it in a similar way to $LJ::SITEROOT (e.g. $LJ::PALIMGROOT/myimage.png). Somewhat related: note that <span class="application">Perlbal</span> has a plugin to handle these before it gets to <span class="application">mod_perl</span>, if you would like to relieve some load on your backend <span class="application">mod_perl</span>s.  But you do not necessarily need this option for using <span class="application">Perlbal</span> to do it.  It depends on your configuration.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITEROOT/palimg</pre></div>
</dd>
<dt>
<a name="ljconfig.server_name"></a><span class="term"><code class="varname">$LJ::SERVER_NAME</code></span>
</dt>
<dd>
<p>System's hostname. If using db-based web logging, this field is stored in the database in the server
                    column, so you can see later how well each server performed. In a massive <span class="application">LiveJournal</span> webfarm, each node would have its own value of this.
                    The default is to query the local machine's hostname at runtime, so you don't need to set this.  It is not used for anything too important anyway To share the same ljconfig.pl on each host (say, over <acronym class="acronym">NFS</acronym>), you can put something like the example in
                    your <code class="filename">ljconfig.pl</code>: It is kind've ugly, but it works. </p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">chomp($SERVER_NAME = `hostname`);</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Sys::Hostname::hostname();</pre></div>
</dd>
<dt>
<a name="ljconfig.sitename"></a><span class="term"><code class="varname">$LJ::SITENAME</code></span>
</dt>
<dd>
<p>The name of the site. This is set to the default, unless you override it in <code class="filename">ljconfig.pl</code>, or you define <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.sitenameshort"><code class="varname">$LJ::SITENAMESHORT</code></a> which is stripped of its trailing .tld suffix (.net, .com, etc.) and used for $SITENAME.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">YourSite.com;</pre></div>
</dd>
<dt>
<a name="ljconfig.sitenameabbrev"></a><span class="term"><code class="varname">$LJ::SITENAMEABBREV</code></span>
</dt>
<dd>
<p>The abbreviated (shortened) possible slang name of your site.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">YS</pre></div>
</dd>
<dt>
<a name="ljconfig.sitenameshort"></a><span class="term"><code class="varname">$LJ::SITENAMESHORT</code></span>
</dt>
<dd>
<p>The shortened name of the site, for brevity purposes.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">YourSite</pre></div>
</dd>
<dt>
<a name="ljconfig.siteroot"></a><span class="term"><code class="varname">$LJ::SITEROOT</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix, including 'http://', to construct canonical pages. Does not take a trailing slash. This can include the port number, if 80 is not in use. This is what gets prepended to all <acronym class="acronym">URL</acronym>s. This can't be auto-detected because of reverse-proxies, etc. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.sslroot"><code class="varname">$LJ::SSLROOT</code></a>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">http://www.$DOMAIN:8011</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">http://$DOMAIN_WEB</pre></div>
</dd>
<dt>
<a name="ljconfig.sslimgprefix"></a><span class="term"><code class="varname">$LJ::SSLIMGPREFIX</code></span>
</dt>
<dd>
<p>Parallels <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.imgprefix"><code class="varname">$LJ::IMGPREFIX</code></a>. The <acronym class="acronym">URL</acronym> prefix of the (static) image directory or subdomain, for the <acronym class="acronym">SSL</acronym>-portion of the site. Does not take a trailing slash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SSLROOT/img</pre></div>
</dd>
<dt>
<a name="ljconfig.ssljsprefix"></a><span class="term"><code class="varname">$LJ::SSLJSPREFIX</code></span>
</dt>
<dd>
<p>Parallels <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.jsprefix"><code class="varname">$LJ::JSPREFIX</code></a>. Prefix on (static) <span class="application">JavaScript</span> directory or subdomain, for the <acronym class="acronym">SSL</acronym>-portion of the site. Does not take a trailing slash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SSLROOT/js</pre></div>
</dd>
<dt>
<a name="ljconfig.sslroot"></a><span class="term"><code class="varname">$LJ::SSLROOT</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix, including 'https://', for the base of the <acronym class="acronym">SSL</acronym>-portion of the site. Does not take a trailing slash. This can't be auto-detected because of reverse-proxies, etc. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.siteroot"><code class="varname">$LJ::SITEROOT</code></a>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">https://www.$DOMAIN:8011/</pre></div>
</dd>
<dt>
<a name="ljconfig.sslstatprefix"></a><span class="term"><code class="varname">$LJ::SSLSTATPREFIX</code></span>
</dt>
<dd>
<p>Parallels <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.statprefix"><code class="varname">$LJ::STATPREFIX</code></a>. The <acronym class="acronym">URL</acronym> prefix to the static content directory or subdomain, for the <acronym class="acronym">SSL</acronym>-portion of the site. Does not take a trailing slash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SSLROOT/stc</pre></div>
</dd>
<dt>
<a name="ljconfig.sslwstatprefix"></a><span class="term"><code class="varname">$LJ::SSLWSTATPREFIX</code></span>
</dt>
<dd>
<p>Parallels <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.jsprefix"><code class="varname">$LJ::JSPREFIX</code></a>. Prefix on (static) <span class="application">JavaScript</span> directory or subdomain, for the <acronym class="acronym">SSL</acronym>-portion of the site. Does not take a trailing slash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SSLROOT/stc</pre></div>
</dd>
<dt>
<a name="ljconfig.statprefix"></a><span class="term"><code class="varname">$LJ::STATPREFIX</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix to the static content directory or subdomain. Does not take a trailing slash.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITEROOT/stc</pre></div>
</dd>
<dt>
<a name="ljconfig.subdomain_function"></a><span class="term"><code class="varname">$LJ::SUBDOMAIN_FUNCTION</code></span>
</dt>
<dd><p>This lets site administrators mark a subdomain as the normal path (foo.$DOMAIN), ignoring the user component of the subdomain. It is
                    useful if you want to serve palimg files elsewhere (like an image caching service, as part of a content delivery network). Some load balancer configuration
                    is also required (see <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.palimgroot"><code class="varname">$LJ::PALIMGROOT</code></a>). The value part of the hash is the subdomain type, such as 'userpics',
                    or 'files' (for serving hook-supplied files).</p></dd>
<dt>
<a name="ljconfig.user_domain"></a><span class="term"><code class="varname">$LJ::USER_DOMAIN</code></span>
</dt>
<dd>
<p>If <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.user_vhosts"><code class="varname">$LJ::USER_VHOSTS</code></a> is enabled, this is the part of the <acronym class="acronym">URL</acronym> that follows 'username'.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$DOMAIN</pre></div>
</dd>
<dt>
<a name="ljconfig.user_vhosts"></a><span class="term"><code class="varname">$LJ::USER_VHOSTS</code></span>
</dt>
<dd><p>If enabled, the <span class="application">LiveJournal</span> installation will support username <acronym class="acronym">URL</acronym>s of the form <code class="uri">http://username.yoursite.com/</code>. Users will also need the &#8220;<span class="quote">userdomain</span>&#8221; cap.</p></dd>
<dt>
<a name="ljconfig.userpic_root"></a><span class="term"><code class="varname">$LJ::USERPIC_ROOT</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">URL</acronym> prefix to the userpic directory or subdomain. Defaults to $SITEROOT/userpic. Does not take a trailing slash.
                    See <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.subdomain_function"><code class="varname">$LJ::SUBDOMAIN_FUNCTION</code></a> to use something else.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$LJ::SITEROOT/userpic</pre></div>
</dd>
<dt>
<a name="ljconfig.wstatprefix"></a><span class="term"><code class="varname">$LJ::WSTATPREFIX</code></span>
</dt>
<dd>
<p>Your static prefix on the same domain as $LJ::DOMAIN_WEB. Does not take a trailing slash. This is needed for <span class="application">JavaScript</span> security, since a script on
                    <code class="uri">stat.example.com</code> can't access content on <code class="uri">www.example.com</code>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITEROOT/stc</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>External and Pluggable Authorization Support</b></p>
<dl>
<dt>
<a name="ljconfig.ldap_base"></a><span class="term"><code class="varname">$LJ::LDAP_BASE</code></span>
</dt>
<dd>
<p>The <acronym class="acronym">DN</acronym> unique identifiers go here.  This is a required setting for <code class="systemitem"><acronym class="acronym">LDAP</acronym></code> (Lightweight Directory Access Protocol) support.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">ou=People,dc=exampleorg,dc=com;</pre></div>
</dd>
<dt>
<a name="ljconfig.ldap_host"></a><span class="term"><code class="varname">$LJ::LDAP_HOST</code></span>
</dt>
<dd>
<p>The host <acronym class="acronym">URI</acronym> goes here. It accepts anything that the <code class="systemitem">Net::LDAP</code> constructor takes. This is a required setting for <code class="systemitem"><acronym class="acronym">LDAP</acronym></code> support.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">ldap.example.com;</pre></div>
</dd>
<dt>
<a name="ljconfig.ldap_uid"></a><span class="term"><code class="varname">$LJ::LDAP_UID</code></span>
</dt>
<dd>
<p>An optional field containing the username.  It defaults to 'uid'.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">uid;</pre></div>
</dd>
<dt>
<a name="ljconfig.openid_compat"></a><span class="term"><code class="varname">$LJ::OPENID_COMPAT</code></span>
</dt>
<dd><p>Support pre-1.0 <span class="trademark">OpenID</span>&#8482; specs as well as final spec.</p></dd>
<dt>
<a name="ljconfig.openid_consumer"></a><span class="term"><code class="varname">$LJ::OPENID_CONSUMER</code></span>
</dt>
<dd><p>Enable <span class="trademark">OpenID</span>&#8482; consumer support, to accept <span class="trademark">OpenID</span>&#8482; identities for logging in and commenting. Off by default.</p></dd>
<dt>
<a name="ljconfig.openid_server"></a><span class="term"><code class="varname">$LJ::OPENID_SERVER</code></span>
</dt>
<dd><p>Enable <span class="trademark">OpenID</span>&#8482; server support.</p></dd>
<dt>
<a name="ljconfig.openid_stateless"></a><span class="term"><code class="varname">$LJ::OPENID_STATELESS</code></span>
</dt>
<dd><p>Speak stateless <span class="trademark">OpenID</span>&#8482;. Slower, but no local state needs to be kept.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Filesystem Related</b></p>
<dl>
<dt>
<a name="ljconfig.blobinfo"></a><span class="term"><code class="varname">%LJ::BLOBINFO</code></span>
</dt>
<dd>
<p>Hash that contains the details for a number of blob servers. The format of the parameter is 'cluster' =&gt; 'directory'. The webserver user also needs to be able to access the given directory. If you wish to use <acronym class="acronym">CAPTCHA</acronym>s image / audio generation for human checks, then this is a necessary parameter. <span class="strong"><strong>This is old. <code class="systemitem"><span class="application">MogileFS</span></code> is the future</strong></span>. You might want to use this option, though, for development, as blobserver in local-filesystem-mode is easy to set up.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">%BLOBINFO = (
    "clusters" =&gt; {
        "1" =&gt; "$LJ::HOME/var/blobs/",
        },
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.disable_media_uploads"></a><span class="term"><code class="varname">$LJ::DISABLE_MEDIA_UPLOADS</code></span>
</dt>
<dd><p>Boolean to disable all media uploads/modifications that would go to <code class="systemitem"><span class="application">MogileFS</span></code>. This puts code that interacts with <code class="systemitem"><span class="application">MogileFS</span></code> into read-only mode: editpics.bml - users can't delete/upload userpics while in this mode, and <acronym class="acronym">CAPTCHA</acronym>s - can't generate new ones or delete old ones while flag on. You might set this if you needed to turn off your <code class="systemitem"><span class="application">MogileFS</span></code> install, for example.</p></dd>
<dt>
<a name="ljconfig.mogilefs_config"></a><span class="term"><code class="varname">%LJ::MOGILEFS_CONFIG</code></span>
</dt>
<dd>
<p>If you are using <code class="systemitem"><span class="application">MogileFS</span></code> on your site for userpics (the userpic factory requires <code class="systemitem"><span class="application">MogileFS</span></code> in order to work) or other purposes, you will need to define this hash and complete the information in it. The <code class="literal">your_class</code> element allows you to define any special <code class="systemitem"><span class="application">MogileFS</span></code> classes you need. If you want <acronym class="acronym">CAPTCHA</acronym>s to come from a <code class="systemitem"><span class="application">MogileFS</span></code> backend, enable <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.captcha_mogilefs"><code class="varname">$LJ::CAPTCHA_MOGILEFS</code></a>; you also need a class called 'captcha' in your domain, as in the example.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    domain =&gt; 'example.com::lj',  # arbitrary namespace, not DNS domain
    hosts =&gt; [ '10.0.0.1:6001' ],
    root =&gt; '/var/mogdata',
    # timeout =&gt; 3,               # optional timeout on MogileFS clients.
    classes =&gt; {
    userpics =&gt; 3,
    captcha =&gt; 2,
    # your_class =&gt; 3,
    },
);</pre></div>
</dd>
<dt>
<a name="ljconfig.mogilefs_pref_ip"></a><span class="term"><code class="varname">%LJ::MOGILEFS_PREF_IP</code></span>
</dt>
<dd>
<p>If you have multiple internal networks and would like the <code class="systemitem"><span class="application">MogileFS</span></code> libraries to pick one network over the other, you can set the preferred <acronym class="acronym">IP</acronym> list. In the example below, the variable is set to say &#8220;<span class="quote">if we try to connect to 10.0.0.1, instead try 10.10.0.1 first and then fall back to 10.0.0.1</span>&#8221;.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    10.0.0.1 =&gt; 10.10.0.1,
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.userpic_blobserver"></a><span class="term"><code class="varname">$LJ::USERPIC_BLOBSERVER</code></span>
</dt>
<dd><p>If set to true, userpics are store as a file on the server rather than in the database. This depends on a &#8220;<span class="quote">Blob Server</span>&#8221; being set up in the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.blobinfo"><code class="varname">%LJ::BLOBINFO</code></a> section. <span class="strong"><strong>This is old. <code class="systemitem"><span class="application">MogileFS</span></code> is the future</strong></span>. You might want to use this option, though, for development, as blobserver in local-filesystem-mode is easy to set up.</p></dd>
<dt>
<a name="ljconfig.userpic_mogilefs"></a><span class="term"><code class="varname">$LJ::USERPIC_MOGILEFS</code></span>
</dt>
<dd><p>Uncomment this to put new userpics in <code class="systemitem"><span class="application">MogileFS</span></code>.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Human Checks</b></p>
<dl>
<dt>
<a name="ljconfig.anti_talkspam"></a><span class="term"><code class="varname">$LJ::ANTI_TALKSPAM</code></span>
</dt>
<dd><p>You should also turn this on to enable anonymous comment <acronym class="acronym">CAPTCHA</acronym>s.</p></dd>
<dt>
<a name="ljconfig.captcha_audio_make"></a><span class="term"><code class="varname">$LJ::CAPTCHA_AUDIO_MAKE</code></span>
</dt>
<dd>
<p>The max number of audio <acronym class="acronym">CAPTCHA</acronym>s to make per-process.  Should be less than <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.captcha_audio_pregen"><code class="varname">$LJ::CAPTCHA_AUDIO_PREGEN</code></a>.  Useful for farming out generation of $LJ::CAPTCHA_AUDIO_PREGEN to lots of machines. (This value is not ideal, since after each generation, processes should just double-check the number available so this configuration variable can be removed, from the codebase).</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">100;</pre></div>
</dd>
<dt>
<a name="ljconfig.captcha_audio_pregen"></a><span class="term"><code class="varname">$LJ::CAPTCHA_AUDIO_PREGEN</code></span>
</dt>
<dd>
<p>The max number of audio <acronym class="acronym">CAPTCHA</acronym>s to pre-generate ahead of time.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">100;</pre></div>
</dd>
<dt>
<a name="ljconfig.captcha_image_pregen"></a><span class="term"><code class="varname">$LJ::CAPTCHA_IMAGE_PREGEN</code></span>
</dt>
<dd>
<p>The max number of image <acronym class="acronym">CAPTCHA</acronym>s to pre-generate ahead of time.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">500;</pre></div>
</dd>
<dt>
<a name="ljconfig.captcha_image_raw"></a><span class="term"><code class="varname">$LJ::CAPTCHA_IMAGE_RAW</code></span>
</dt>
<dd>
<p>What image files to use to generate image <acronym class="acronym">CAPTCHA</acronym>s.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$LJ::HOME/htdocs/img/captcha</pre></div>
</dd>
<dt>
<a name="ljconfig.captcha_mogilefs"></a><span class="term"><code class="varname">$LJ::CAPTCHA_MOGILEFS</code></span>
</dt>
<dd><p>In addition to filling out the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.mogilefs_config"><code class="varname">%LJ::MOGILEFS_CONFIG</code></a> hash, you need to enable some options if you want to use <code class="systemitem"><span class="application">MogileFS</span></code>. Turn this on to put <acronym class="acronym">CAPTCHA</acronym>s in <code class="systemitem"><span class="application">MogileFS</span></code>.</p></dd>
<dt>
<a name="ljconfig.human_check"></a><span class="term"><code class="varname">%LJ::HUMAN_CHECK</code></span>
</dt>
<dd>
<p>This option enables human checks at various places throughout the site. Enabling this requires a &#8220;<span class="quote">Blob Server</span>&#8221; setup (for details of setting one up, refer to the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.blobinfo"><code class="varname">%LJ::BLOBINFO</code></a> section of the document.).</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        create =&gt; 1,
        anonpost =&gt; 1,
);</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Maintenance Messages</b></p>
<dl>
<dt>
<a name="ljconfig.msg_db_unavailable"></a><span class="term"><code class="varname">$LJ::MSG_DB_UNAVAILABLE</code></span>
</dt>
<dd>
<p>Customizable <abbr class="abbrev">DB</abbr> unavailable message.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Sorry, database temporarily unavailable.
Please see &lt;a href='http://status.example.com/'&gt;&#8230;&lt;/a&gt; for status updates.</pre></div>
</dd>
<dt>
<a name="ljconfig.msg_error"></a><span class="term"><code class="varname">$LJ::MSG_ERROR</code></span>
</dt>
<dd>
<p>Customizable generic unavailable message.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Sorry, there was a problem.</pre></div>
</dd>
<dt>
<a name="ljconfig.nodb_msg"></a><span class="term"><code class="varname">$LJ::NODB_MSG</code></span>
</dt>
<dd>
<p>Message to send to users when the database is unavailable</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Database temporarily unavailable. Try again shortly.</pre></div>
</dd>
<dt>
<a name="ljconfig.server_down"></a><span class="term"><code class="varname">$LJ::SERVER_DOWN</code></span>
</dt>
<dd><p>Set true when performing maintenance that requires user activity to be minimum, such as database defragmentation and cluster movements. The site is globally marked as 'down' and users get an error message, as defined by $SERVER_DOWN_MESSAGE and $SERVER_DOWN_SUBJECT.  See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.server_totally_down"><code class="varname">$LJ::SERVER_TOTALLY_DOWN</code></a>.</p></dd>
<dt>
<a name="ljconfig.server_down_message"></a><span class="term"><code class="varname">$LJ::SERVER_DOWN_MESSAGE</code></span>
</dt>
<dd>
<p>While <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.server_down"><code class="varname">$LJ::SERVER_DOWN</code></a> is set true, this message will be displayed for anyone trying to access the <span class="application">LiveJournal</span> installation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">$SITENAME is down right now while we upgrade. It should be up in a few minutes.</pre></div>
</dd>
<dt>
<a name="ljconfig.server_down_subject"></a><span class="term"><code class="varname">$LJ::SERVER_DOWN_SUBJECT</code></span>
</dt>
<dd>
<p>While <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.server_down"><code class="varname">$LJ::SERVER_DOWN</code></a> is set true, this subject/title is displayed on the error message for anyone trying to access the <span class="application">LiveJournal</span> installation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Maintenance</pre></div>
</dd>
<dt>
<a name="ljconfig.server_totally_down"></a><span class="term"><code class="varname">$LJ::SERVER_TOTALLY_DOWN</code></span>
</dt>
<dd><p>The site is globally marked as 'down' and users get an error message, as defined by $SERVER_DOWN_MESSAGE and $SERVER_DOWN_SUBJECT.  But compared to $SERVER_DOWN, this error message is done incredibly early before any dispatch to different modules. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.server_down"><code class="varname">$LJ::SERVER_DOWN</code></a>.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Miscellaneous settings</b></p>
<dl>
<dt>
<a name="ljconfig.bml_deny_config"></a><span class="term"><code class="varname">$LJ::BML_DENY_CONFIG</code></span>
</dt>
<dd><p>Comma-separated list of directories under <code class="filename">htdocs</code> which should be served without parsing their _config.bml files.  For example, directories that might be under a lesser-trusted person's control.</p></dd>
<dt>
<a name="ljconfig.dont_log_images"></a><span class="term"><code class="varname">$LJ::DONT_LOG_IMAGES</code></span>
</dt>
<dd><p>If <span class="application">Apache</span> access logging to a database is enabled, in the <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.dbinfo"><code class="varname">%LJ::DBINFO</code></a> hash, this boolean lets you choose whether to log images or just page requests.</p></dd>
<dt>
<a name="ljconfig.example_user_account"></a><span class="term"><code class="varname">$LJ::EXAMPLE_USER_ACCOUNT</code></span>
</dt>
<dd><p>The username of the example user account, for use in Support and user-documentation.  Must be an actual account on the site.</p></dd>
<dt>
<a name="ljconfig.helpurls"></a><span class="term"><code class="varname">%LJ::HELPURLS</code></span>
</dt>
<dd>
<p>A hash of <acronym class="acronym">URL</acronym>s. If defined, little help bubbles appear next to common widgets to the <acronym class="acronym">URL</acronym> you define. Consult <a class="xref" href="lj.install.ljconfig.helpurls.html" title="2. %LJ::HELPURLS">Section 2, &#8220;<code class="varname">%LJ::HELPURLS</code>&#8221;</a> for more information.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">%HELPURLS = (
            "accounttype" =&gt; "http://www.example.com/doc/faq/",
            "security" =&gt; "\$SITEROOT/support/faqbrowse.bml?faqid=1",
            "linklist_support" =&gt; "\$SITEROOT/manage/links.bml",
            );</pre></div>
</dd>
<dt>
<a name="ljconfig.initial_friends"></a><span class="term"><code class="varname">@LJ::INITIAL_FRIENDS</code></span>
</dt>
<dd>
<p>This is a list of usernames that will be added automatically to the Friends list of all newly created accounts on this installation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">qw(news)</pre></div>
</dd>
<dt>
<a name="ljconfig.initial_optional_friends"></a><span class="term"><code class="varname">@LJ::INITIAL_OPTIONAL_FRIENDS</code></span>
</dt>
<dd>
<p>Initial <span class="emphasis"><em>optional</em></span> friends, listed on create.bml.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">qw(news);</pre></div>
</dd>
<dt>
<a name="ljconfig.initial_optout_friends"></a><span class="term"><code class="varname">@LJ::INITIAL_OPTOUT_FRIENDS</code></span>
</dt>
<dd>
<p>Makes initial friends (checkboxes) on create.bml be selected by default.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">qw(news);</pre></div>
</dd>
<dt>
<a name="ljconfig.langs"></a><span class="term"><code class="varname">@LJ::LANGS</code></span>
</dt>
<dd>
<p>Array of <acronym class="acronym">ISO</acronym> (639/639_3166) language codes to make available for users to select from.  You can edit the array in <code class="filename">ljconfig.pl</code>, as in the example, for any extra languages you plan to configure, translate and make available on your site. Also, if the user has not selected a language, it is auto-detected from their browser. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.default_lang"><code class="varname">@LJ::DEFAULT_LANG</code></a>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">qw(en_YS en_GB de da es it ru ja pt eo nl hu fi sv pl zh lv tr ms);</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">en</pre></div>
</dd>
<dt>
<a name="ljconfig.max_bans"></a><span class="term"><code class="varname">$LJ::MAX_BANS</code></span>
</dt>
<dd><p>If you want to change the limit on how many bans a user can make, use this variable. The default is 5000, but it is site-configurable.</p></dd>
<dt>
<a name="ljconfig.protected_usernames"></a><span class="term"><code class="varname">@LJ::PROTECTED_USERNAMES</code></span>
</dt>
<dd>
<p>This is a list of regular expressions matching usernames that users on this <span class="application">LiveJournal</span> installation can't create on their own.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">("^ex_", "^lj_")</pre></div>
</dd>
<dt>
<a name="ljconfig.qbufferd_isolate"></a><span class="term"><code class="varname">@LJ::QBUFFERD_ISOLATE</code></span>
</dt>
<dd>
<p>On a larger installation, it is useful to have multiple <code class="systemitem">qbufferd.pl</code> processes, one for each command type. This is not necessary on a small installation.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">('weblogscom', 'eg_comnewpost')</pre></div>
</dd>
<dt>
<a name="ljconfig.random_user_period"></a><span class="term"><code class="varname">$LJ::RANDOM_USER_PERIOD</code></span>
</dt>
<dd>
<p>If you want to change the amount of time a user stays in the <a class="link" href="ljp.dbschema.random_user_set.html" title="random_user_set">random_user_set</a> table, change this. The random user search feature uses this. The value is in days (default is one week).</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">7</pre></div>
</dd>
<dt>
<a name="ljconfig.reproxy_disable"></a><span class="term"><code class="varname">%LJ::REPROXY_DISABLE</code></span>
</dt>
<dd>
<p>If you are using <span class="application">Perlbal</span> to balance your web site, it can use reproxying to distribute the files itself (in versions prior to 1.38, reproxying was enabled by default). You can use this option to disable that reproxying on an item-by-item basis. This can be useful for extremely busy sites without persistent connections between <span class="application">Perlbal</span> and <code class="systemitem">mogstored</code>, etc.  The hash is a set of file classes that should not be internally redirected to <code class="systemitem">mogstored</code> nodes.  Values are true, keys are one of 'userpics', 'captchas', or site-local file types like 'phoneposts' for <code class="literal">ljcom</code>.  See also %LJ::USERPIC_REPROXY_DISABLE. The default is to allow all reproxying.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        userpics =&gt; 1,
        captchas =&gt; 1,
        );</pre></div>
</dd>
<dt>
<a name="ljconfig.support_diagnostics"></a><span class="term"><code class="varname">%LJ::SUPPORT_DIAGNOSTICS</code></span>
</dt>
<dd>
<p>Support diagnostics can be helpful if you are trying to track down a bug that has been occurring.  The user-agent information will be appended to requests that users open through the web interface.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">( 'track_useragent' =&gt; 1, );</pre></div>
</dd>
<dt>
<a name="ljconfig.track_url_active"></a><span class="term"><code class="varname">$LJ::TRACK_URL_ACTIVE</code></span>
</dt>
<dd><p>Record in <span class="application">memcached</span> what <acronym class="acronym">URL</acronym> a given host/pid is working on.</p></dd>
<dt>
<a name="ljconfig.trust_x_headers"></a><span class="term"><code class="varname">$LJ::TRUST_X_HEADERS</code></span>
</dt>
<dd><p>If you know that your installation is behind a proxy or other fence that inserts <code class="literal">X-Forwarded-For</code> headers that you can trust, enable this. Otherwise, don't! Default is off (for direct connection to the 'net).  If behind your own reverse proxies, you should enable this.</p></dd>
<dt>
<a name="ljconfig.use_qbufferd_delay"></a><span class="term"><code class="varname">$LJ::USE_QBUFFERD_DELAY</code></span>
</dt>
<dd>
<p>Used in conjunction with <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.qbufferd_isolate"><code class="varname">@LJ::QBUFFERD_ISOLATE</code></a>, to specify a time to sleep between runs of <code class="systemitem">qbuffered</code> tasks. The default is 15 seconds.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">10</pre></div>
</dd>
<dt>
<a name="ljconfig.use_ssl"></a><span class="term"><code class="varname">$LJ::USE_SSL</code></span>
</dt>
<dd><p>Links to <acronym class="acronym">SSL</acronym> portions of the site should be visible.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Optimization</b></p>
<dl>
<dt>
<a name="ljconfig.compress_text"></a><span class="term"><code class="varname">$LJ::COMPRESS_TEXT</code></span>
</dt>
<dd><p>Boolean setting that compresses entry (stored in <a class="link" href="ljp.dbschema.logtext2.html" title="logtext2">logtext2</a>) and comment text (stored in <a class="link" href="ljp.dbschema.talktext2.html" title="talktext2">talktext2</a>) in the database, to
                    save disk space.</p></dd>
<dt>
<a name="ljconfig.concat_res"></a><span class="term"><code class="varname">$LJ::CONCAT_RES</code></span>
</dt>
<dd><p>Instruct <span class="application">Perlbal</span> to concatenate static files on <span class="emphasis"><em>non</em></span>-<acronym class="acronym">SSL</acronym> pages.</p></dd>
<dt>
<a name="ljconfig.concat_res_ssl"></a><span class="term"><code class="varname">$LJ::CONCAT_RES_SSL</code></span>
</dt>
<dd><p>Instruct <span class="application">Perlbal</span> to concatenate static files on <acronym class="acronym">SSL</acronym> pages.</p></dd>
<dt>
<a name="ljconfig.disabled"></a><span class="term"><code class="varname">%LJ::DISABLED</code></span>
</dt>
<dd><p>Boolean hash, signifying that separate parts of this <span class="application">LiveJournal</span> installation are working and are available to use. A value of 1 on individual items within
                    the hash indicates 'on' i.e. &#8220;<span class="quote">please switch on disabling of this feature</span>&#8221;.Consult <a class="xref" href="lj.install.ljconfig.disabled.html" title="3. %LJ::DISABLED">Section 3, &#8220;<code class="varname">%LJ::DISABLED</code>&#8221;</a> for more information.</p></dd>
<dt>
<a name="ljconfig.do_gzip"></a><span class="term"><code class="varname">$LJ::DO_GZIP</code></span>
</dt>
<dd><p>Boolean setting that when enabled, signals to the installation to use <span class="command"><strong>gzip</strong></span> encoding, to compress text content
                    sent to browsers, wherever possible. In most cases this is known to cut bandwidth usage in half.
                    Requires the <span class="package">Compress::Zlib</span> perl module. <span class="package">mod_gzip</span> is somewhat buggy in <span class="application">Apache</span> 1.3x;
                    just use <span class="package">Compress::Zlib</span>. See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.gzip_okay"><code class="varname">%LJ::GZIP_OKAY</code></a></p></dd>
<dt>
<a name="ljconfig.force_empty_friends"></a><span class="term"><code class="varname">%LJ::FORCE_EMPTY_FRIENDS</code></span>
</dt>
<dd>
<p>A hash of userids whose Friends views should be disabled for performance reasons. This is useful if new accounts are auto-added to another account upon creation (described in <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.initial_friends"><code class="varname">@LJ::INITIAL_FRIENDS</code></a>), as in most situations building a Friends view for <span class="emphasis"><em>those</em></span> accounts would be superfluous and taxing on your installation. In the example, 234 and 232252 are userids of popular system communities.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        234 =&gt; 1,
        232252 =&gt; 1,
);</pre></div>
</dd>
<dt>
<a name="ljconfig.loadfriends_using_gearman"></a><span class="term"><code class="varname">$LJ::LOADFRIENDS_USING_GEARMAN</code></span>
</dt>
<dd><p>Enable this to use <span class="application">Gearman</span> when a set of &#8220;<span class="quote">Friends</span>&#8221; need loading. You will also need to run the corresponding worker.</p></dd>
<dt>
<a name="ljconfig.loadtags_using_gearman"></a><span class="term"><code class="varname">$LJ::LOADTAGS_USING_GEARMAN</code></span>
</dt>
<dd><p>Enable this to use <span class="application">Gearman</span> for loading user tags. This needs to be enabled so the corresponding worker operates, otherwise it falls back to loading in-process among the web processes.</p></dd>
<dt>
<a name="ljconfig.max_s2compiled_cache_size"></a><span class="term"><code class="varname">$LJ::MAX_S2COMPILED_CACHE_SIZE</code></span>
</dt>
<dd>
<p>Threshold (in bytes) under which compiled S2 layers are cached in <span class="application">memcached</span>. If you have a lot of free <span class="application">memcached</span> memory and a loaded database server with lots of queries to the <a class="link" href="ljp.dbschema.s2compiled.html" title="s2compiled">s2compiled</a> table, turn this up.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">7500;</pre></div>
</dd>
<dt>
<a name="ljconfig.qbufferd_clusters"></a><span class="term"><code class="varname">@LJ::QBUFFERD_CLUSTERS</code></span>
</dt>
<dd><p>If defined, list of clusters that qbufferd should use when retrieving and processing outstanding jobs.  Defaults to value of <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.clusters"><code class="varname">@LJ::CLUSTERS</code></a>.</p></dd>
<dt>
<a name="ljconfig.suicide"></a><span class="term"><code class="varname">$LJ::SUICIDE</code></span>
</dt>
<dd><p>Large processes should voluntarily kill themselves at the end of requests.</p></dd>
<dt>
<a name="ljconfig.suicide_over"></a><span class="term"><code class="varname">%LJ::SUICIDE_OVER</code></span>
</dt>
<dd>
<p>This is used by <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.suicide"><code class="varname">$LJ::SUICIDE</code></a>, with Apache::DebateSuicide, the underlying cleanup handler, to decide whether a large process should voluntarily kill itself at the end of the request. It lets the site administrator set a global and/or per-server maximum memory cap on the sum of all of <span class="application">mod_perl</span> children. If a processes memory is over the configured size (in <abbr class="abbrev">KB</abbr>), then the process will exit.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">1_000_000;</pre></div>
</dd>
<dt>
<a name="ljconfig.suicide_under"></a><span class="term"><code class="varname">%LJ::SUICIDE_UNDER</code></span>
</dt>
<dd>
<p>See also <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.suicide_over"><code class="varname">%LJ::SUICIDE_OVER</code></a>. If a processes memory is under the configured size (in <abbr class="abbrev">KB</abbr>), then the process will exit.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">150_000;</pre></div>
</dd>
<dt>
<a name="ljconfig.synd_cluster"></a><span class="term"><code class="varname">$LJ::SYND_CLUSTER</code></span>
</dt>
<dd><p>Syndicated accounts tend to have more database traffic than normal accounts, so it is a good idea to set up a separate cluster for them.If set to a cluster (defined by <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.clusters"><code class="varname">@LJ::CLUSTERS</code></a>), all newly created accounts will reside on that cluster. If undefined, syndicated accounts are assigned
                    to user clusters (partitions) in the normal way.</p></dd>
<dt>
<a name="ljconfig.tools_recent_comments_max"></a><span class="term"><code class="varname">$LJ::TOOLS_RECENT_COMMENTS_MAX</code></span>
</dt>
<dd>
<p>Maximum number of comments to display on Recent Comments page <code class="uri">/tools/recent_comments.bml</code>.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">50;</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Policy Options</b></p>
<dl>
<dt>
<a name="ljconfig.coppa_check"></a><span class="term"><code class="varname">$LJ::COPPA_CHECK</code></span>
</dt>
<dd><p>Collect birthdays to mark users as underage (under 13).  To make this work, you first need to create a new capability class for
                    underage users. Then, set <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.underage_bit"><code class="varname">$LJ::UNDERAGE_BIT</code></a> to be the bit number for the cap class to put underage users in. Off by default.</p></dd>
<dt>
<a name="ljconfig.no_password_check"></a><span class="term"><code class="varname">$LJ::NO_PASSWORD_CHECK</code></span>
</dt>
<dd><p>Set this option true if you are running an installation using <code class="literal">ljcom</code> code and if you haven't installed the <code class="filename">Crypt::Cracklib</code> perl module. When enabled, the installation will not do strong password checks. Users can use any old dumb password they like.</p></dd>
<dt>
<a name="ljconfig.required_tos"></a><span class="term"><code class="varname">%LJ::REQUIRED_TOS</code></span>
</dt>
<dd>
<p>Require users to agree to the <acronym class="acronym">TOS</acronym>. The array items, respectively, allow you to: Set required version to enable tos version requirement mechanism, and change the messages displayed to users. The configurable title/html/text group values displayed are defaults, and are used if no 'domain'-specific values are defined in the rest of the array. The remaining items refer to: text/<acronym class="acronym">HTML</acronym> to use when message displayed for a login action, an update action, posting a comment (this will just use the defaults above), protocol actions, and last, support requests.  The revision must be found in the first line of your <code class="filename"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/htdocs/inc/legal-tos</code> include file. </p>
<pre class="programlisting">&lt;!-- $Revision$ --&gt;</pre>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
            rev   =&gt; '1.0',

            title =&gt; 'Configurable Title for TOS agreement requirement notice',
            html  =&gt; 'Configurable HTML for TOS requirement',
            text  =&gt; 'Configurable text error message for TOS requirement',

            login =&gt; {
            html =&gt; 'Before logging in, you must update your TOS agreement',
            },

            update =&gt; {
            html =&gt; 'HTML to use in update.bml',
            },

            comment =&gt; {
            },

            protocol =&gt; {
            text =&gt; 'Please visit $LJ::SITEROOT/legal/tos.bml to update your TOS agreement',
            },

            support =&gt; {
            html =&gt; 'Text to use when viewing a support request',
            },

);</pre></div>
</dd>
<dt>
<a name="ljconfig.tos_check"></a><span class="term"><code class="varname">$LJ::TOS_CHECK</code></span>
</dt>
<dd>
<p>If set, the account creation dialog shows a checkbox, asking users if they agree to the site Terms of Service, and will not allow them to create an account if they refuse. This depends on a few files being located in the proper directories, namely <code class="filename">tos.bml</code> and <code class="filename">tos-mini.bml</code> under <code class="filename"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/htdocs/legal</code>. The account creation dialog can also check for new instances of the Terms of Service if the Terms of Service text is located in an <abbr class="abbrev">SVN</abbr> managed include file (<code class="filename"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/htdocs/inc/legal-tos</code>), and if the include file includes the following line at the top: </p>
<pre class="programlisting">&lt;!-- $Revision$ --&gt;</pre>
</dd>
<dt>
<a name="ljconfig.underage_bit"></a><span class="term"><code class="varname">$LJ::UNDERAGE_BIT</code></span>
</dt>
<dd><p>Used in conjunction with <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.coppa_check"><code class="varname">$LJ::COPPA_CHECK</code></a>.</p></dd>
<dt>
<a name="ljconfig.underage_error"></a><span class="term"><code class="varname">$LJ::UNDERAGE_ERROR</code></span>
</dt>
<dd>
<p>Error message to show underage users.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">Sorry, your account needs to be &lt;a href='$SITEROOT/agecheck/'&gt;age verified&lt;/&gt;
before you can leave any comments.;</pre></div>
</dd>
<dt>
<a name="ljconfig.use_acct_codes"></a><span class="term"><code class="varname">$LJ::USE_ACCT_CODES</code></span>
</dt>
<dd><p>A boolean setting that makes joining the site require an &#8220;<span class="quote">invite code</span>&#8221; before being able to create a new account.  Not all features are implemented in the <code class="literal">livejournal</code>-only tree. <code class="systemitem">LiveJournal.com</code> used this for a period until late 2003. Note that this code might've bitrotted, so perhaps it should be kept off.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Portal Configuration</b></p>
<dl>
<dt>
<a name="ljconfig.portal_boxes"></a><span class="term"><code class="varname">@LJ::PORTAL_BOXES</code></span>
</dt>
<dd>
<p>The default portal boxes ('portlets') a user will see.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
        'Birthdays',
        'UpdateJournal',
        'TextMessage',
        'PopWithFriends',
        'Friends',
        'Manage',
        'RecentComments',
        'NewUser',
        'FriendsPage',
        'FAQ',
        'Debug',
        'Note',
        'RandomUser',
        'Tags',
        'Reader',
);</pre></div>
</dd>
<dt>
<a name="ljconfig.portal_boxes_hidden"></a><span class="term"><code class="varname">@LJ::PORTAL_BOXES_HIDDEN</code></span>
</dt>
<dd>
<p>A list of boxes that do not appear to users, by default.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">('Debug',
);</pre></div>
</dd>
<dt>
<a name="ljconfig.portal_defaultboxstates"></a><span class="term"><code class="varname">%LJ::PORTAL_DEFAULTBOXSTATES</code></span>
</dt>
<dd>
<p>The default sizes and positions of the boxes.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
            'Birthdays' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 4,
                    'col'   =&gt; 'R',
            },
            'FriendsPage' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 6,
                    'col'   =&gt; 'L',
            },
            'FAQ' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 8,
                    'col'   =&gt; 'R',
            },
            'Friends' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 10,
                    'col'   =&gt; 'R',
            },
            'Manage' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 12,
                    'col'   =&gt; 'L',
            },
            'PopWithFriends' =&gt; {
                    'added' =&gt; 0,
                    'col'   =&gt; 'R',
            },
            'RecentComments' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 10,
                    'col'   =&gt; 'L',
            },
            'UpdateJournal' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 4,
                    'col'   =&gt; 'L',
            },
            'NewUser' =&gt; {
                    'added' =&gt; 1,
                    'sort'  =&gt; 2,
                    'col'   =&gt; 'L',
            },
            'TextMessage' =&gt; {
                    'added'  =&gt; 1,
                    'sort'   =&gt; 12,
                    'col'    =&gt; 'R',
            },
            'Note' =&gt; {
                    'notunique'  =&gt; 1,
            },
            'Reader' =&gt; {
                    'notunique'  =&gt; 1,
            },
);</pre></div>
</dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>Styling Related</b></p>
<dl>
<dt>
<a name="ljconfig.default_style"></a><span class="term"><code class="varname">$LJ::DEFAULT_STYLE</code></span>
</dt>
<dd>
<p>A hash that defines the default S2 layers to use for accounts.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">{
            'core' =&gt; 'core1',
            'layout' =&gt; 'generator/layout',
            'i18n' =&gt; 'generator/en',
        };</pre></div>
</dd>
<dt>
<a name="ljconfig.dont_touch_styles"></a><span class="term"><code class="varname">$LJ::DONT_TOUCH_STYLES</code></span>
</dt>
<dd><p>During the upgrade populator, do not touch styles.  That is, consider the local styles the definitive ones, and any differences between the database and the distribution files should mean that the distribution is old, not the database.</p></dd>
<dt>
<a name="ljconfig.max_friends_view_age"></a><span class="term"><code class="varname">$LJ::MAX_FRIENDS_VIEW_AGE</code></span>
</dt>
<dd>
<p>Sets how far back somebody can go on a user's <code class="literal">Friends</code> page, including their own. The default value is two weeks. That is, entries posted more than two weeks ago will not appear on anybody's <code class="literal">Friends</code> page, even if they are the most recent entries in that user's journal. See also $LJ::MAX_SCROLLBACK_FRIENDS.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">3600*24*14;</pre></div>
</dd>
<dt>
<a name="ljconfig.max_scrollback_friends"></a><span class="term"><code class="varname">$LJ::MAX_SCROLLBACK_FRIENDS</code></span>
</dt>
<dd>
<p>Sets how far back somebody can go on a user's <code class="literal">Friends</code> page. That is, how far you can skip back with the ?skip= <acronym class="acronym">URL</acronym> argument.  A higher value can significantly affect the speed of the installation.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">1000</pre></div>
</dd>
<dt>
<a name="ljconfig.max_scrollback_lastn"></a><span class="term"><code class="varname">$LJ::MAX_SCROLLBACK_LASTN</code></span>
</dt>
<dd>
<p>The recent items (lastn view)'s max scrollback depth.  That is, how far you can skip back with the ?skip= <acronym class="acronym">URL</acronym> argument.  Defaults to 100.  After that, the 'previous' links go to day views, which are stable <acronym class="acronym">URL</acronym>s. ?skip= <acronym class="acronym">URL</acronym>s aren't stable, and there are inefficiencies making this value too large, so you're advised to not go too far above the default of 100.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">100</pre></div>
</dd>
<dt>
<a name="ljconfig.minimal_bml_scheme"></a><span class="term"><code class="varname">$LJ::MINIMAL_BML_SCHEME</code></span>
</dt>
<dd>
<p>Used with <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.minimal_useragent"><code class="varname">%LJ::MINIMAL_USERAGENT</code></a>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">'lynx';</pre></div>
</dd>
<dt>
<a name="ljconfig.minimal_style"></a><span class="term"><code class="varname">%LJ::MINIMAL_STYLE</code></span>
</dt>
<dd>
<p>In the example, the default S2 bare style (usually it is 'core', but it is site-configurable) is used. You can add more layers and styles, which must be public styles. Used with <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.minimal_useragent"><code class="varname">%LJ::MINIMAL_USERAGENT</code></a>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    'core' =&gt; 'core1',
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.minimal_useragent"></a><span class="term"><code class="varname">%LJ::MINIMAL_USERAGENT</code></span>
</dt>
<dd>
<p>Some people on portable devices may have troubles viewing the nice site scheme you've setup, so you can specify that some user-agent prefixes should instead use fallback presentation information. In the example below, the fallback enables if the user-agent field starts with &#8220;<span class="quote">Foo</span>&#8221;. Note you can only put text here; no numbers, spaces, or symbols. The &#8220;<span class="quote">w</span>&#8221; in the defaults refers to <span class="application">w3m</span>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    'Foo' =&gt; 1,
    );</pre></div>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">(
    'Links' =&gt; 1,
    'Lynx' =&gt; 1,
    'w' =&gt; 1,
    'BlackBerry' =&gt; 1,
    'WebTV' =&gt; 1,
    );</pre></div>
</dd>
<dt>
<a name="ljconfig.s2_trusted"></a><span class="term"><code class="varname">%LJ::S2_TRUSTED</code></span>
</dt>
<dd>
<p>Allows a specific user's S2 layers to run <span class="application">JavaScript</span>. This is normally considered a potential security risk and disabled for all accounts. The hash structure is a series of userid =&gt; username pairs. The system account is trusted by default, so it is not necessary to add it to this hash.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">( '2' =&gt; 'exampleusername', '3' =&gt; 'test', );</pre></div>
</dd>
<dt>
<a name="ljconfig.syn_lastn_s1"></a><span class="term"><code class="varname">$LJ::SYN_LASTN_S1</code></span>
</dt>
<dd><p>When set to an appropriate <code class="literal">LASTN</code> style, all syndicated accounts on this installation will use this style.</p></dd>
<dt>
<a name="ljconfig.use_control_strip"></a><span class="term"><code class="varname">$LJ::USE_CONTROL_STRIP</code></span>
</dt>
<dd><p>Enable the navigation strip onsite. This gives users quick access to common site features from a toolbar at the top of journal Recent Entries and Friends pages, when the journal style supports it.</p></dd>
</dl>
</div>
<div class="variablelist">
<p class="title"><b>System Tools</b></p>
<dl>
<dt>
<a name="ljconfig.bin_festival"></a><span class="term"><code class="varname">$LJ::BIN_FESTIVAL</code></span>
</dt>
<dd><p>Path to <span class="application">festival</span> (available in the <code class="systemitem"><span class="application">Debian</span></code> package &#8220;<span class="quote"><span class="package">festival</span></span>&#8221;). Needed for audio <acronym class="acronym">CAPTCHA</acronym>s.</p></dd>
<dt>
<a name="ljconfig.bin_sox"></a><span class="term"><code class="varname">$LJ::BIN_SOX</code></span>
</dt>
<dd><p>Path to <span class="application">sox</span> (available in the <code class="systemitem"><span class="application">Debian</span></code> package &#8220;<span class="quote"><span class="package">sox</span></span>&#8221;). Needed for audio <acronym class="acronym">CAPTCHA</acronym>s.</p></dd>
<dt>
<a name="ljconfig.dmtp_server"></a><span class="term"><code class="varname">@LJ::DMTP_SERVER</code></span>
</dt>
<dd>
<p>Host/<acronym class="acronym">IP</acronym> with port number to outgoing <code class="systemitem">DMTP</code> server.  Takes precedence over <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.smtp_server"><code class="varname">$LJ::SMTP_SERVER</code></a>. Note: the <code class="systemitem">DMTP</code> protocol and server is a dumb hack.  If you have a good outgoing <code class="systemitem"><acronym class="acronym">SMTP</acronym></code> server, use that instead.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">127.0.0.1:8030</pre></div>
</dd>
<dt>
<a name="ljconfig.ljmaint_verbose"></a><span class="term"><code class="varname">$LJ::LJMAINT_VERBOSE</code></span>
</dt>
<dd>
<p>Use verbose output during maintenance tasks, like parsing for syndicated feed accounts. Values are one of 0=quiet, 1=normal, 2=verbose. If you only run maintenance tasks using <code class="systemitem">cron</code>, modify your crontabs accordingly if you enable this. For example,
                    if you re-direct standard output to <code class="filename">/dev/null</code> (using &gt;<code class="filename">/dev/null</code>), change that part of the cron job line to direct the verbose output to a file, or remove the redirect so <code class="systemitem">cron</code> falls back to the default, where cron jobs generate an <span class="application">e-mail</span> to the user executing the command.</p>
<p><span class="emphasis"><em>Default:</em></span> </p>
<div class="informalexample"><pre class="programlisting">1</pre></div>
</dd>
<dt>
<a name="ljconfig.lockdir"></a><span class="term"><code class="varname">$LJ::LOCKDIR</code></span>
</dt>
<dd>
<p>A directory to use for lock files if you're not using <code class="literal">ddlockd</code> for locking. Using <code class="literal">ddlockd</code>, the default lockdir is <code class="filename"><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/locks</code>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">/var/lock/livejournal</pre></div>
</dd>
<dt>
<a name="ljconfig.log_gtop"></a><span class="term"><code class="varname">$LJ::LOG_GTOP</code></span>
</dt>
<dd><p>Turn on statistics generation that shows memory/cpu usage deltas of the <span class="application">Apache</span> child for each request, for database logs.  It requires that the <code class="filename">GTop</code> module be installed.</p></dd>
<dt>
<a name="ljconfig.maillock"></a><span class="term"><code class="varname">$LJ::MAILLOCK</code></span>
</dt>
<dd><p>Locking method that mailgated.pl should use when processing incoming <span class="application">e-mail</span>s from the <code class="systemitem">Maildir</code>. Values may be either: 'hostname', 'none', or 'ddlockd'. You can safely use 'none' if you have a single host processing mail, otherwise 'ddlockd' or 'hostname' is recommended, though 'hostname' means mail that arrived on a host that then crashes will not be processed until it comes back up. If you are using multiple mailgated processes, 'ddlockd' is recommended.</p></dd>
<dt>
<a name="ljconfig.mailspool"></a><span class="term"><code class="varname">$LJ::MAILSPOOL</code></span>
</dt>
<dd>
<p>With this, <code class="systemitem">mailgated</code> acts as a daemon, so libs are loaded only once, instead of once per incoming message. It allows for error and retry, and is <acronym class="acronym">NFS</acronym> safe. This should be a path to a Maildir, matching the delivery location of your <acronym class="acronym">MTA</acronym>.  If you are using <span class="application">Sendmail</span>, you should deliver with <span class="command"><strong>procmail</strong></span> (versions 3.14 and above) for Maildir support.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">"/home/livejournal/mail"</pre></div>
</dd>
<dt>
<a name="ljconfig.smtp_server"></a><span class="term"><code class="varname">$LJ::SMTP_SERVER</code></span>
</dt>
<dd>
<p>Host/<acronym class="acronym">IP</acronym> to outgoing <code class="systemitem"><acronym class="acronym">SMTP</acronym></code> server.  Takes precedence over <a class="xref" href="lj.install.ljconfig.vars.html#ljconfig.sendmail"><code class="varname">$LJ::SENDMAIL</code></a>. This the recommended system to use for sending <span class="application">e-mail</span>.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">127.0.0.1</pre></div>
</dd>
<dt>
<a name="ljconfig.speller"></a><span class="term"><code class="varname">$LJ::SPELLER</code></span>
</dt>
<dd>
<p>The system path to a spell checking binary, along with any necessary parameters.</p>
<p><span class="emphasis"><em>Example:</em></span> </p>
<div class="informalexample"><pre class="programlisting">"/usr/bin/aspell pipe --sug-mode=fast --ignore-case"</pre></div>
</dd>
</dl>
</div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="lj.install.ljconfig.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="lj.install.ljconfig.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="lj.install.ljconfig.helpurls.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 10. Configuring ljconfig.pl </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 2. <code class="varname">%LJ::HELPURLS</code>
</td>
</tr>
</table>
</div>
</body>
</html>
