<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 27. Protocol Versions</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="ljp.csp.protocol.html" title="Part III. Client/Server Protocol">
<link rel="prev" href="ljp.csp.atom.html" title="Chapter 26. Supporting the Atom API">
<link rel="next" href="ljp.csp.entry_downloading.html" title="Chapter 28. Downloading Entries">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 27. Protocol Versions</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ljp.csp.atom.html">Prev</a> </td>
<th width="60%" align="center">Part III. Client/Server Protocol</th>
<td width="20%" align="right"> <a accesskey="n" href="ljp.csp.entry_downloading.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en" id="ljp.csp.versions">
<div class="titlepage"><div><div><h2 class="title">Chapter 27. Protocol Versions</h2></div></div></div>
<p>
    The <span class="application">LiveJournal</span> protocol (so far) has been more or less static; while new
    modes have been added, the basic operation has not changed much.
    Introduction of Unicode support in <span class="application">LiveJournal</span> necessitated changes
    in the way text is encoded in protocol requests and responses. To
    allow new clients to take advantage of Unicode support and at the same time
    avoid breaking existing clients, a versioning scheme was put into the
    protocol. The client sends the number of the highest protocol version it
    supports in every request, inside a <code class="varname">ver</code> attribute; version
    <em class="parameter"><code>0</code></em> is implicit if the client does not send the 
    <code class="varname">ver</code> attribute. Currently there are two versions of the 
    protocol, and the Unicode-enabled server code supports both of them.
  </p>
<div class="itemizedlist"><ul type="disc">
<li><p><b>Version <em class="parameter"><code>0</code></em>. </b>
      If a client does not send a <code class="varname">ver</code> key on a request, 
      it assumed to support protocol Version <em class="parameter"><code>0</code></em>. In protocol
      Version <em class="parameter"><code>0</code></em>, textual information transmitted from or to
      the server is always assumed to be a stream of 8-bit bytes, not necessarily
      <acronym class="acronym">ASCII</acronym>, but without any guarantee that the 
      non-<acronym class="acronym">ASCII</acronym> bytes are presented in any particular encoding.
    </p></li>
<li><p><b>Version <em class="parameter"><code>1</code></em>. </b>
      Version <em class="parameter"><code>1</code></em> differs from Version <em class="parameter"><code>0</code></em> only
      by imposing additional requirements on the text transmitted through requests
      and responses; there aren't any changes in protocol modes. The additional
      requirements are that in a Version <em class="parameter"><code>1</code></em> request, the client
      <span class="emphasis"><em>must</em></span> transmit all textual information as a stream of 
      Unicode data encoded in <acronym class="acronym">UTF</acronym>-8; the server <span class="emphasis"><em>must</em></span>
      respond to Version <em class="parameter"><code>1</code></em> requests with Version <em class="parameter"><code>1</code></em>
      responses; in such Version <em class="parameter"><code>1</code></em> responses, the server 
      <span class="emphasis"><em>must</em></span> also transmit all textual information encoded in 
      <acronym class="acronym">UTF</acronym>-8; and the client <span class="emphasis"><em>must</em></span> expect that
      and handle such responses correctly. In other words, all information transmitted
      via protocol when Version <em class="parameter"><code>1</code></em> is used is always encoded in 
      <acronym class="acronym">UTF</acronym>-8. <acronym class="acronym">UTF</acronym>-8 is a representation of Unicode
      in a bytestream format compatible with <acronym class="acronym">ASCII</acronym>. 
      <sup>[<a name="unicode" href="#ftn.unicode" class="footnote">19</a>]</sup>
   </p></li>
</ul></div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.unicode" href="#unicode" class="para">19</a>] </sup>See the <a href="http://www.unicode.org/" target="_top">Unicode Consortium<span class="ulink"><img src="/img/link.png" alt="[o]" title=""></span></a> website
      for more information on Unicode and <acronym class="acronym">UTF</acronym>-8.</p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ljp.csp.atom.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ljp.csp.protocol.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ljp.csp.entry_downloading.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 26. Supporting the Atom <acronym class="acronym">API</acronym> </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 28. Downloading Entries</td>
</tr>
</table>
</div>
</body>
</html>
