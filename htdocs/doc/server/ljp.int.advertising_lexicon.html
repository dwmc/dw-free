<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 19. Advertising Lexicon</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="ljp.internals.html" title="Part II. Internals">
<link rel="prev" href="ljp.int.esn.html" title="Chapter 18. ESN - Event Subscription Notification">
<link rel="next" href="ljp.int.memcache_keys.html" title="Chapter 20. memcached data - storage &amp; identification">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 19. Advertising Lexicon</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ljp.int.esn.html">Prev</a> </td>
<th width="60%" align="center">Part II. Internals</th>
<td width="20%" align="right"> <a accesskey="n" href="ljp.int.memcache_keys.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en" id="ljp.int.advertising_lexicon">
<div class="titlepage"><div><div><h2 class="title">Chapter 19. Advertising Lexicon</h2></div></div></div>
<p>There are a number of voodoo words and concepts in 
<code class="literal">LJ::ads()</code> and the related advertising code.  
This document aims to de-mystify them. This document might be 
inaccurate.  If so, please fix it.</p>
<div class="variablelist">
<p class="title"><b>Advertising Elements</b></p>
<dl>
<dt><span class="term">type <acronym class="acronym">aka</acronym> &#8220;<span class="quote">ctx</span>&#8221;</span></dt>
<dd>
<p>A type/context is either &#8220;<span class="quote">app</span>&#8221; or &#8220;<span class="quote">journal</span>&#8221;.</p>
<pre class="programlisting"><code class="literal">LJ::ads</code>(type =&gt; $type)</pre>
<pre class="programlisting"><code class="literal">LJ::run_hook</code>(&#8220;<span class="quote">should_show_ad</span>&#8221;, { ctx =&gt; $type });</pre>
</dd>
<dt><span class="term">orient</span></dt>
<dd><p>Elements like &#8220;<span class="quote"><span class="application"><acronym class="acronym">BML</acronym></span>-App-Confirm</span>&#8221;.  
This uniquely identifies a place in the code where an ad can go (and be turned on/off).</p></dd>
<dt><span class="term">pagetype</span></dt>
<dd><p>Identical to orient, without leading &#8220;<span class="quote"><span class="application"><acronym class="acronym">BML</acronym></span>-</span>&#8221;, if present.</p></dd>
<dt><span class="term">&#8220;<span class="quote">AD_PAGE_MAPPING</span>&#8221;, mapping</span></dt>
<dd>
<p>How to behave for a given orient/pagetype(?), basically a hashref of:</p>
<pre class="programlisting">
    {
    adunit =&gt; &#8220;<span class="quote">skyscraper</span>&#8221;,     # leaderboard, etc.
    target =&gt; &#8220;<span class="quote">user</span>&#8221;,           # content, etc.
    }
</pre>
</dd>
<dt><span class="term">&#8220;<span class="quote">%AD_TYPE</span>&#8221;, <acronym class="acronym">aka</acronym> &#8220;<span class="quote">adunit</span>&#8221;</span></dt>
<dd><pre class="programlisting">
    {
    skyscraper =&gt; { width =&gt; 160, height =&gt; 600 
    }
</pre></dd>
<dt><span class="term">position</span></dt>
<dd><pre class="programlisting">LJ::ads(position =&gt; $pos)</pre></dd>
</dl>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ljp.int.esn.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ljp.internals.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ljp.int.memcache_keys.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 18. <code class="systemitem"><acronym class="acronym">ESN</acronym></code> - Event Subscription Notification </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 20. <span class="application">memcached</span> data - storage &amp; identification</td>
</tr>
</table>
</div>
</body>
</html>
