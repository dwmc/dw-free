<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>2. Installing Perl Modules</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="lj.install.perl_setup.html" title="Chapter 6. Perl">
<link rel="prev" href="lj.install.perl_setup.install.html" title="1. Installing Perl">
<link rel="next" href="lj.install.general_setup.html" title="Chapter 7. General Setup">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">2. Installing Perl Modules</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="lj.install.perl_setup.install.html">Prev</a> </td>
<th width="60%" align="center">Chapter 6. Perl</th>
<td width="20%" align="right"> <a accesskey="n" href="lj.install.general_setup.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lj.install.perl_setup.modules">2. Installing Perl Modules</h2></div></div></div>
<p>
      <span class="application">LiveJournal</span> requires several Perl modules to be installed. Installing these
      modules requires a fully working perl and C development environment
      (including a C compiler and make tool).
    </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>
      Some modules such as <span class="package">GD</span> and <span class="package">Compress::Zlib</span> 
      require certain system libraries to be pre-installed on your machine.
      Please read the author-provided <code class="filename">README</code> files for each module before proceeding further.  
    </p>
<p>This may mean particular development packages need to be installed on your system, before a Perl module will install in <acronym class="acronym">CPAN</acronym>.
    For example, on a <code class="systemitem"><span class="application">Debian</span></code> system, to install the optional <span class="package">Math::BigInt::GMP</span> module,
    you should install <span class="package">libgmp3-dev</span> first. Similarly, you may need to install the
    &#8220;<span class="quote">development</span>&#8221; packages for <span class="application">MySQL</span> and <acronym class="acronym">GD</acronym> on your system,
    before attempting to install the related Perl modules. The names of these packages varies
    between <span class="application">Linux</span> distributions, but are often called <em class="replaceable"><code>&lt;packagename&gt;</code></em>-dev.
    Installing binary packages of modules provided through your <span class="application">Linux</span> distribution is the easier option.</p>
</div>
<div class="table">
<a name="table-lj-perl_modules"></a><p class="title"><b>Table 6.1. Required Perl Modules</b></p>
<div class="table-contents"><table summary="Required Perl Modules" border="0">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td>DateTime</td>
<td>libdatetime-perl</td>
</tr>
<tr>
<td>DBI</td>
<td>libdbi-perl</td>
</tr>
<tr>
<td>DBD::mysql</td>
<td>libdbd-mysql-perl</td>
</tr>
<tr>
<td>Class::Autouse</td>
<td>libclass-autouse-perl</td>
</tr>
<tr>
<td>Digest::MD5</td>
<td>libmd5-perl</td>
</tr>
<tr>
<td>Digest::SHA1</td>
<td>libdigest-sha1-perl</td>
</tr>
<tr>
<td>HTML::Template</td>
<td>libhtml-template-perl</td>
</tr>
<tr>
<td>Image::Size</td>
<td>libimage-size-perl</td>
</tr>
<tr>
<td>MIME::Lite</td>
<td>libmime-lite-perl</td>
</tr>
<tr>
<td>MIME::Words</td>
<td>libmime-perl</td>
</tr>
<tr>
<td>Compress::Zlib</td>
<td>libcompress-zlib-perl</td>
</tr>
<tr>
<td>Net::DNS</td>
<td>libnet-dns-perl</td>
</tr>
<tr>
<td>URI::URL</td>
<td>liburi-perl</td>
</tr>
<tr>
<td>HTML::Tagset</td>
<td>libhtml-tagset-perl</td>
</tr>
<tr>
<td>HTML::Parser</td>
<td>libhtml-parser-perl</td>
</tr>
<tr>
<td>LWP::Simple</td>
<td>libwww-perl</td>
</tr>
<tr>
<td>LWP::UserAgent</td>
<td>libwww-perl</td>
</tr>
<tr>
<td>GD</td>
<td>libgd-gd2-perl</td>
</tr>
<tr>
<td>Mail::Address</td>
<td>libmailtools-perl</td>
</tr>
<tr>
<td>Unicode::MapUTF8</td>
<td>libunicode-maputf8-perl</td>
</tr>
<tr>
<td>XML::Simple</td>
<td>libxml-simple-perl</td>
</tr>
<tr>
<td>IO::WrapTie</td>
<td>libio-stringy-perl</td>
</tr>
<tr>
<td>Unicode::CheckUTF8</td>
<td> </td>
</tr>
<tr>
<td>Digest::HMAC_SHA1</td>
<td>libdigest-hmac-perl</td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="variablelist">
<p class="title"><b>Optional modules</b></p>
<dl>
<dt>
<span class="term">GD::Graph, </span><span class="term">libgd-graph-perl</span>
</dt>
<dd>Required for making graphs for the statistics page.</dd>
<dt>
<span class="term">Proc::ProcessTable, </span><span class="term">libproc-process-perl</span>
</dt>
<dd>Better reliability for starting daemons necessary for high-traffic installations.</dd>
<dt>
<span class="term">RPC::XML, </span><span class="term">librpc-xml-perl</span>
</dt>
<dd>Required for outgoing XML-RPC support</dd>
<dt>
<span class="term">SOAP::Lite, </span><span class="term">libsoap-lite-perl</span>
</dt>
<dd>Required for XML-RPC support.</dd>
<dt>
<span class="term">XML::RSS, </span><span class="term">libxml-rss-perl</span>
</dt>
<dd>Required for retrieving RSS off of other sites (syndication).</dd>
<dt>
<span class="term">String::CRC32, </span><span class="term">libstring-crc32-perl</span>
</dt>
<dd>Required for palette-altering of PNG files.  Only necessary if you plan to make your own S2 styles that use PNGs, not GIFs.</dd>
<dt>
<span class="term">XML::Atom, </span><span class="term">libxml-atom-perl</span>
</dt>
<dd>Required for Atom API support.</dd>
<dt>
<span class="term">Math::BigInt::GMP, </span><span class="term">libmath-bigint-gmp-perl</span>
</dt>
<dd>Aides Crypt::DH so it is not crazy slow.</dd>
<dt>
<span class="term">URI::Fetch, </span><span class="term">liburi-fetch-perl</span>
</dt>
<dd>Required for OpenID support.</dd>
<dt>
<span class="term">Crypt::DH, </span><span class="term">libcrypt-dh-perl</span>
</dt>
<dd>Required for OpenID support.</dd>
<dt>
<span class="term">Image::Magick, </span><span class="term">perlmagick</span>
</dt>
<dd>Required for the userpic factory.</dd>
<dt>
<span class="term">Class::Accessor, </span><span class="term">libclass-accessor-perl</span>
</dt>
<dd>Required for TheSchwartz job submission.</dd>
<dt>
<span class="term">Class::Trigger, </span><span class="term">libclass-trigger-perl</span>
</dt>
<dd>Required for TheSchwartz job submission.</dd>
<dt>
<span class="term">Class::Data::Inheritable, </span><span class="term">libclass-data-inheritable-perl</span>
</dt>
<dd>Required for TheSchwartz job submission.</dd>
<dt>
<span class="term">GnuPG::Interface, </span><span class="term">libgnupg-interface-perl</span>
</dt>
<dd>Required for email posting.</dd>
<dt>
<span class="term">Mail::GnuPG, </span><span class="term">libmail-gnupg-perl</span>
</dt>
<dd>Required for email posting.</dd>
<dt>
<span class="term">Text::vCard, </span><span class="term">libtext-vcard-perl</span>
</dt>
<dd>Used to generate user vCards.</dd>
<dt>
<span class="term">IP::Country::Fast, </span><span class="term"></span>
</dt>
<dd>Required for country lookup with IP address.</dd>
<dt>
<span class="term">GTop, </span><span class="term"></span>
</dt>
<dd>Required for Apache per-request database logging.</dd>
</dl>
</div>
<p><b><code class="systemitem"><span class="application">Debian</span></code> Install. </b>If you are using <code class="systemitem"><span class="application">Debian</span></code> the following command should retrieve and build every required module.  If there are any modules not yet packaged in <code class="systemitem"><span class="application">Debian</span></code>, you can use <acronym class="acronym">CPAN</acronym> to install those &#8212; <code class="literal">Unicode::CheckUTF8</code> is an example.:</p>
<pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code><span class="command"><strong>apt-get install</strong></span> libdatetime-perl libdbi-perl libdbd-mysql-perl \
libclass-autouse-perl libmd5-perl libdigest-sha1-perl \
libhtml-template-perl libimage-size-perl libmime-lite-perl \
libmime-perl libcompress-zlib-perl libnet-dns-perl \
liburi-perl libhtml-tagset-perl libhtml-parser-perl \
libwww-perl libwww-perl libgd-gd2-perl \
libmailtools-perl libunicode-maputf8-perl libxml-simple-perl \
libio-stringy-perl  libdigest-hmac-perl </code></strong></pre>
<p>And likewise for the optional modules:</p>
<pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code><span class="command"><strong>apt-get install</strong></span> libgd-graph-perl libproc-process-perl librpc-xml-perl \
libsoap-lite-perl libxml-rss-perl libstring-crc32-perl \
libxml-atom-perl libmath-bigint-gmp-perl liburi-fetch-perl \
libcrypt-dh-perl perlmagick libclass-accessor-perl \
libclass-trigger-perl libclass-data-inheritable-perl libgnupg-interface-perl \
libmail-gnupg-perl libtext-vcard-perl  \
 </code></strong></pre>
<p><b>Using <acronym class="acronym">CPAN</acronym>. </b>
    Alternatively, you can use <acronym class="acronym">CPAN</acronym> to install the modules:
  </p>
<p>From the root prompt on your server, invoke the <acronym class="acronym">CPAN</acronym> shell:</p>
<pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>perl -MCPAN -e shell</code></strong></pre>
<p>
  Once the Perl interpreter has loaded (and been configured), you can install
   modules with: <code class="literal">install <em class="replaceable"><code>MODULENAME</code></em></code>.
</p>
<p>The first thing you should do is upgrade your <acronym class="acronym">CPAN</acronym>:</p>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Bundle::CPAN</code></strong></pre>
<p>Once it is completed, type:</p>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code>reload cpan</code></strong></pre>
<p>Now, enter the following command to retrieve all of the required modules:</p>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install DateTime</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install DBI</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install DBD::mysql</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Class::Autouse</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Digest::MD5</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Digest::SHA1</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install HTML::Template</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Image::Size</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install MIME::Lite</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install MIME::Words</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Compress::Zlib</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Net::DNS</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install URI::URL</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install HTML::Tagset</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install HTML::Parser</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install LWP::Simple</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install LWP::UserAgent</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install GD</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Mail::Address</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Unicode::MapUTF8</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install XML::Simple</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install IO::WrapTie</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Unicode::CheckUTF8</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Digest::HMAC_SHA1</code></strong>
</pre>
<p>And likewise for the optional modules:</p>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install GD::Graph</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Proc::ProcessTable</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install RPC::XML</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install SOAP::Lite</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install XML::RSS</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install String::CRC32</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install XML::Atom</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Math::BigInt::GMP</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install URI::Fetch</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Crypt::DH</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Image::Magick</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Class::Accessor</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Class::Trigger</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Class::Data::Inheritable</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install GnuPG::Interface</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Mail::GnuPG</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install Text::vCard</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install IP::Country::Fast</code></strong>
<code class="prompt">cpan&gt;</code> <strong class="userinput"><code>install GTop</code></strong>
</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>
    Be aware that after freshly installing <code class="filename"><em class="replaceable"><code>make</code></em></code> / <code class="filename"><em class="replaceable"><code>gcc</code></em></code>, your perl installation will not necessarily detect it. This means module installation will still fail during the 'make' stage. You may need to invoke the <acronym class="acronym">CPAN</acronym> shell and run the setup routine again, to point to the location of <code class="filename">make</code>:</p>
<pre class="screen"><code class="prompt">#</code><strong class="userinput"><code> <span class="command"><strong>perl <code class="option">-MCPAN -e shell CPAN</code></strong></span></code></strong></pre>
<p>  </p>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code><span class="command"><strong>o conf <code class="option">make</code></strong></span> <em class="replaceable"><code>/usr/bin/make</code></em></code></strong></pre>
<pre class="screen"><code class="prompt">cpan&gt;</code> <strong class="userinput"><code><span class="command"><strong>o conf <code class="option">commit</code></strong></span></code></strong></pre>
</div>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Tip</h3>
<p>You can find out the locations of the various tools the <acronym class="acronym">CPAN</acronym> setup routine (<span class="command"><strong>o conf</strong></span>) will ask you about by using the <span class="command"><strong>whereis</strong></span> command, at a command prompt. 
    For example: </p>
<pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code><span class="command"><strong>whereis</strong></span> <span class="application">gzip</span></code></strong></pre>
</div>
<p>
      To make sure you have the necessary modules run the included tool:
      <span class="command"><strong><em class="parameter"><code>$<code class="envar">LJHOME</code></code></em>/bin/checkconfig.pl</strong></span> <code class="option">--needed-debs --only=modules</code></p>
<p>
      If <span class="application">checkconfig.pl</span> does not detect all of the required modules, it
      will tell you which ones you are missing. You should install those.</p>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="lj.install.perl_setup.install.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="lj.install.perl_setup.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="lj.install.general_setup.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">1. Installing Perl </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 7. General Setup</td>
</tr>
</table>
</div>
</body>
</html>
