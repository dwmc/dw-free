<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>4. Configuring %LJ::DBINFO</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="lj.install.mysql_setup.html" title="Chapter 8. MySQL">
<link rel="prev" href="lj.install.mysql_setup.create_db.html" title="3. Create the LiveJournal Database">
<link rel="next" href="lj.install.mysql_setup.pop_db.html" title="5. Populate the Database">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4. Configuring <code class="literal">%LJ::DBINFO</code>
</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="lj.install.mysql_setup.create_db.html">Prev</a> </td>
<th width="60%" align="center">Chapter 8. <span class="application">MySQL</span>
</th>
<td width="20%" align="right"> <a accesskey="n" href="lj.install.mysql_setup.pop_db.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="lj.install.ljconfig.dbinfo">4. Configuring <code class="literal">%LJ::DBINFO</code>
</h2></div></div></div>
<p>
    <code class="literal">%LJ::DBINFO</code> is a hash that contains the necessary information for <span class="application">LiveJournal</span> to connect to your database.
    For installations that require more than one database server, the directives to define each cluster database are also defined here. 
  </p>
<p><b>Connection keys. </b>
    <code class="literal">%LJ::DBINFO</code> requires a master key that is labelled 'master', and
    also requires the correct address for connection to the database itself.
    If you are using a <acronym class="acronym">TCP</acronym> based connection, you can specify a host key with the value of the
    location of the server (either the name, such as <code class="systemitem">localhost</code>,
    or the <acronym class="acronym">IP</acronym> address, such as <code class="systemitem">127.0.0.1</code>),
    and a port key for the database port (typically 3306). If instead you are using a socket based connection, you can
    specify a sock key with the value set to the socket file. Specify a user key for your database username, and a
    password key for your database password.
    <sup>[<a name="dbinfo_pass" href="#ftn.dbinfo_pass" class="footnote">3</a>]</sup> </p>
<p>
    If you used a different database name than the suggested &#8220;<span class="quote">livejournal</span>&#8221;, specify a dbname key
    with the value of the database name.</p>
<p><b>Roles. </b>
    The role key in <code class="literal">%LJ::DBINFO</code> is a hash that sets different &#8220;<span class="quote">role</span>&#8221; keys to the current configuration with boolean values.
    Roles are basically tasks assigned to the configuration. For example, to set up a server that will host your directory (which can get pretty intensive with a fair amount of users), you would do the following:
    </p>
<pre class="programlisting">'role' =&gt; {
    'directory' =&gt; 1,
},</pre>
<p>
  </p>
<div class="example">
<a name="example-lj-dbinfo_hash"></a><p class="title"><b>Example 8.1. Sample <code class="literal">%LJ::DBINFO</code> hash</b></p>
<div class="example-contents"><pre class="programlisting">%DBINFO = (
    # master must be named 'master'
        'master' =&gt; {
            'host' =&gt; 'localhost',
            'port' =&gt; 3306,

            # or, leave out host/port and use a socket to connect:
            # 'sock' =&gt; &#8220;<span class="quote">/var/run/mysqld.sock</span>&#8221;;

            # optional dbname, if not 'livejournal':
            # 'dbname' =&gt; 'livejournal', 

            'user' =&gt; 'lj',
            'pass' =&gt; 'ljpass',
            'role' =&gt; {
                'cluster1' =&gt; 1,

                # optionally, have <span class="application">Apache</span> write its access logs to a <span class="application">MySQL</span> database
                # 'logs' =&gt; 1,
            },
        },
);</pre></div>
</div>
<br class="example-break"><p>
    That's the basic configuration for an installation with only one database
    server. Details about using more than one database server are covered later,
    in <a class="xref" href="lj.install.supplemental_sw.multiple_db.html" title="2. Setting up multiple database servers">Section 2, &#8220;Setting up multiple database servers&#8221;</a>.</p>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.dbinfo_pass" href="#dbinfo_pass" class="para">3</a>] </sup>You should replace '<em class="replaceable"><code>ljpass</code></em>' with
    your <span class="emphasis"><em>actual</em></span> password. Similarly, amend other fields as appropriate. Security permissions
    for the configuration files is handled through your operating system.</p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="lj.install.mysql_setup.create_db.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="lj.install.mysql_setup.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="lj.install.mysql_setup.pop_db.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">3. Create the <span class="application">LiveJournal</span> Database </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 5. Populate the Database</td>
</tr>
</table>
</div>
</body>
</html>
