<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 31. Comparing Style Systems</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="ljp.styles.index.html" title="Part IV. Making Journal Styles">
<link rel="prev" href="ljp.styles.index.html" title="Part IV. Making Journal Styles">
<link rel="next" href="ljp.styles.s1.html" title="Chapter 32. Style System 1 (S1)">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">Chapter 31. Comparing Style Systems</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ljp.styles.index.html">Prev</a> </td>
<th width="60%" align="center">Part IV. Making Journal Styles</th>
<td width="20%" align="right"> <a accesskey="n" href="ljp.styles.s1.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="chapter" lang="en" id="ljp.styles.compare">
<div class="titlepage"><div><div><h2 class="title">Chapter 31. Comparing Style Systems</h2></div></div></div>
<p>When we designed S2, there were specific features that we had in mind
    that would fix certain design flaws inherit with S1. The table belows
    explains some of the reasoning behind these changes.</p>
<div class="informaltable"><table border="0">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Feature</th>
<th>S1</th>
<th>S2</th>
</tr></thead>
<tbody>
<tr valign="top">
<td valign="top">Flexible &amp; Extensible</td>
<td valign="top"><p>S1 forces users to define a template for each new type
            of view: recent entries, friends page, day view, calendar, etc. If
            we want to add a new view type, users have to basically write their
            style again.
          </p></td>
<td valign="top"><p>In S2 you describe the formatting of objects, not the
            formatting of views. Thus, we can easily add new views in the future,
            and making a &#8220;<span class="quote">recent</span>&#8221; view pretty much makes all your
            other views automatically.
          </p></td>
</tr>
<tr valign="top">
<td valign="top">Safety</td>
<td valign="top"><p>S1 is completely safe. It's so brain-dead that it
            cannot be anything but but safe. You have to have some intelligence
            to be harmful.
          </p></td>
<td valign="top">
<p>The new style system is its own language that gets
            compiled into another language, and run on the webserver. Letting
            users run code on the server is inherently dangerous&#8230; it obviously
            has to be free of things like
            <span class="command"><strong>rm</strong></span> <code class="option">-rf /</code>, but also, it has to be
            free from infinite loops, and anything that could consume large
            amounts of resources.</p>
            <p>The S2 language does not have while loops, gotos, or any
            other control construct that would permit an infinite loops. It only
            has if/else blocks and foreach over finite lists.</p>
            <p>There is also a limit on execution time of a resulting style,
            to avoid situations we cannot trap easily, such as functions calling
            each other in cycle, or badly-written recursion.</p>
          </td>
</tr>
<tr valign="top">
<td valign="top">Speed</td>
<td valign="top"><p>S1 is a CPU hog, doing tons of parsing, text munging
            and substitutions and run-time.
          </p></td>
<td valign="top"><p>In the new system, S2 code will be parsed, checked, and
            compiled before the page is loaded. When a page is loaded in the
            future, the code will just be run, which will already be in the
            language that the <span class="application">LiveJournal</span> server runs on. At the moment
            this is Perl but in the future we could write a PHP or Java servlet
            backend to the S2 compiler.
          </p></td>
</tr>
<tr valign="top">
<td valign="top">Internationalizablilty</td>
<td valign="top">
<p>S1 can support non-English languages and locales, but
            hardly:</p>
            <div class="itemizedlist"><ul type="disc">
<li>The server injects a lot of English into S1
                variables, especially in dates.</li>
<li>The calendar always begins weeks on
                Sunday.</li>
<li>The system to make nouns plural (2 Comments, 3
                Replies) is very English-specific.</li>
<li>Porting a style to a new language involves
                forking the style and modifying away, losing all future changes
                to the original style. S1 forces users to define a template for
                each new type.</li>
</ul></div>
          </td>
<td valign="top"><p>The new style system has been designed for
            internationalization. One of the S2 layers is an
            &#8220;<span class="quote">i18n layer</span>&#8221;, which overrides English method definitions
            from the core and sets properties, like the day weeks start on.
          </p></td>
</tr>
<tr valign="top">
<td valign="top">Ease of Use</td>
<td valign="top"><p>S1 was never designed to be easy. It was designed for a
            few administrators to make styles, which would then be made public.
          </p></td>
<td valign="top"><p>Wizards and tools generate S2 behind the scenes for
            most users. The hard-core users can write their own layouts and overlay
            other layers in the raw S2 language.
          </p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ljp.styles.index.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ljp.styles.index.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ljp.styles.s1.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Part IV. Making Journal Styles </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 32. Style System 1 (<acronym class="acronym">S1</acronym>)</td>
</tr>
</table>
</div>
</body>
</html>
