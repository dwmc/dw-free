<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>readonly_user</title>
<link rel="stylesheet" href="style.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="LiveJournal Server">
<link rel="up" href="ljp.dbschema.ref.html" title="Database Schema Browser">
<link rel="prev" href="ljp.dbschema.ratelog.html" title="ratelog">
<link rel="next" href="ljp.dbschema.recbill.html" title="recbill">
<meta name="date" content="2008-Jan-15">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">
      <span class="database">readonly_user</span>
    </th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ljp.dbschema.ratelog.html">Prev</a> </td>
<th width="60%" align="center">Database Schema Browser</th>
<td width="20%" align="right"> <a accesskey="n" href="ljp.dbschema.recbill.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="refentry" lang="en">
<a name="ljp.dbschema.readonly_user"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2>
      <span class="database">readonly_user</span>
    </h2>
<p>
      <span class="database">readonly_user</span>
     &#8212; Used by the move user cluster script. Both before and after updating a user's read-only flag we add the user to this table, which is just an index onto users who - might - be in read-only. 

A maintenance task will periodically clean those and make sure nobody is stranded in read-only, without resorting to a full tablescan of the <a class="link" href="ljp.dbschema.user.html" title="user"><span class="database">user</span></a> table, by checking if users are still locked, removing those that are not from this table, querying the job server (if up) for users that are still locked and unlocking those that can be unlocked.</p>
</div>
<div class="refsect1" lang="en">
<a name="id3373551"></a><h2>
      <span class="database">readonly_user</span>
    </h2>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Column name</th>
<th>Type</th>
<th>Null</th>
<th>Default</th>
<th>Description</th>
</tr></thead>
<tbody><tr>
<td>
              <span class="database">userid</span>
            </td>
<td>
              <span class="type">int unsigned</span>
            </td>
<td align="center"> </td>
<td align="center">
              <code class="literal">0</code>
            </td>
<td> </td>
</tr></tbody>
</table></div>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Key name</th>
<th>Type</th>
<th>Column(s)</th>
</tr></thead>
<tbody><tr>
<td>
              <span class="database">PRIMARY</span>
            </td>
<td>
              <span class="type">PRIMARY</span>
            </td>
<td>
              <span class="database"></span>
            </td>
</tr></tbody>
</table></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ljp.dbschema.ratelog.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="ljp.dbschema.ref.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="ljp.dbschema.recbill.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">
      <span class="database">ratelog</span>
     </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> 
      <span class="database">recbill</span>
    </td>
</tr>
</table>
</div>
</body>
</html>
